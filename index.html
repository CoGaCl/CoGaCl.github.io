<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Funimate</title>
	<!-- å¼•å…¥æ ·å¼æ–‡ä»¶ -->
	<link rel="stylesheet" href="https://unpkg.com/vant@2.12/lib/index.css" />
	<!-- å¼•å…¥ Vue å’Œ Vant çš„ JS æ–‡ä»¶ -->
	<script src="https://unpkg.com/vue@2.6/dist/vue.min.js"></script>
	<script src="https://unpkg.com/vant@2.12/lib/vant.min.js"></script>
	<script src="https://qiuxuewl.site/js/vant/jquery.min.js"></script> <!-- BSæ·»åŠ å‘½ä»¤ --> 
	<style>
		* {
			padding: 0;
			margin: 0;
		}

        /*èœå•*/
        
        *:not(input, checkbox, textarea) {
            /*ç¦æ­¢æ–‡æœ¬é€‰æ‹©*/
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            /* Non-prefixed version, currently */
        }
        
   .aymenu {
      position: fixed;
      width: 240px;
      height: 370px;
      top: calc(40% - 180px);
      left: calc(40% - 180px);
      z-index: 456;
      border-radius: 8px;
      overflow: hidden;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      font-weight: bold;
      background: rgba(0, 0, 0, .40);
    }
        
        .van-tab {
            font-size: 15px;
        }
        
  
        
        .van-nav-bar__title {
            max-width: 60%;
            margin: 0 auto;
            color: #323233;
            font-weight: 500;
            font-size: 16px;
            font-weight: 800;
        }
        
        .fun-block__title {
            margin: 0;
            padding: 32px 32px 5px;
            color: rgba(69, 90, 100, 0.6);
            font-weight: normal;
            font-size: 14px;
            line-height: 16px;
        }
        
        .van-cell {
            line-height: unset;
        }
        
        .menuBody {
            overflow-y: auto;
            padding-bottom: 46px;
        }
        
        .custom-button {
            width: 26px;
            color: #fff;
            font-size: 10px;
            line-height: 18px;
            text-align: center;
            border-radius: 100px;
            background-color: #1989fa;
        }
        
        .van-stepper--round .van-stepper__minus {
            color: #fff;
            background-color: #1989fa;
            border: 1px solid #1989fa;
        }
        
        .van-stepper--round .van-stepper__plus {
            color: #fff;
            background-color: #1989fa;
        }
        
      
        .van-hairline--top-bottom::after,
        .van-hairline-unset--top-bottom::after {
            border-width: 0px 0;
        }
        
        .van-tabs__nav--card {
            /*æ»‘å—*/
            box-sizing: border-box;
            height: 30px;
            margin: 0 0px;
            border: 0px solid #e9e9eb;
        }
        
        .van-tabs__nav--card2 {
            /*æ»‘å—*/
            box-sizing: border-box;
            height: 30px;
            margin: 0 16px;
            border: 0px solid #e9e9eb;
        }
        
        .van-tabs__nav--card .van-tab.van-tab--active,
        .van-tabs__nav--card2 .van-tab.van-tab--active {
            border-radius: 6px;
            color: #323233;
            background-color: #ffffff;
            font-weight: 600;
        }
        
        .van-tabs__nav--card .van-tab,
        .van-tabs__nav--card2 .van-tab {
            color: #969799;
            border-right: 0px solid #969799;
            font-weight: 450;

        }
        
        .van-tabs__nav--card .van-tab.van-tab--active,
        .van-tabs__nav--card2 .van-tab.van-tab--active {
            border-radius: 6px;
            color: #FFFFFF;
            background: rgba(0, 0, 0, .55);

        }
        
        .van-tabs__nav--card .van-tab,
        .van-tabs__nav--card2 .van-tab {
            color: #969799;
            border-right: 0px solid #969799;
        }
        
        .van-tabs__nav {
            position: relative;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            background-color: #e9e9eb;
            -webkit-user-select: none;
            user-select: none;
            border-radius: 7px;
background: rgba(0, 0, 0, .10);
        }
        
   
        
        .van-switch {
            position: relative;
            display: inline-block;
            box-sizing: content-box;
            width: 50px;
            height: 30px;
            font-size: 30px;
            background-color: #fff;
            border: 1px solid #fff;
            border-radius: 1em;
            cursor: pointer;
            -webkit-transition: background-color .3s;
            transition: background-color .3s;
        }
        
        .van-switch__node {
            position: absolute;
            font-size: 20px;
            top: 2px;
            left: 2px;
            width: 26px;
            height: 26px;
            font-size: inherit;
            background-color: #fff;
            box-shadow: 0 3px 1px 0 rgb(0 0 0 / 2%), 0 2px 2px 0 rgb(0 0 0 / 5%), 0 3px 3px 0 rgb(0 0 0 / 5%);
            -webkit-transition: -webkit-transform .3s cubic-bezier(.3, 1.05, .4, 1.05);
            transition: -webkit-transform .3s cubic-bezier(.3, 1.05, .4, 1.05);
            transition: transform .3s cubic-bezier(.3, 1.05, .4, 1.05);
            transition: transform .3s cubic-bezier(.3, 1.05, .4, 1.05), -webkit-transform .3s cubic-bezier(.3, 1.05, .4, 1.05);
        }
        
        .van-stepper__minus,
        .van-stepper__plus {
            position: relative;
            box-sizing: border-box;
            width: 28px;
            height: 28px;
            margin: 0;
            padding: 0;
            color: #323233;
            vertical-align: middle;
            background-color: #e9e9eb;
            border: 0;
            cursor: pointer;
        }
        
        .van-stepper__input {
            box-sizing: border-box;
            width: 32px;
            height: 28px;
            margin: 0 0px;
            padding: 0;
            color: #323233;
            font-size: 14px;
            line-height: normal;
            text-align: center;
            vertical-align: middle;
            background-color: #e9e9eb;
            border: 0;
            border-width: 1px 0;
            border-radius: 0;
        }
        
        .van-stepper__minus::before,
        .van-stepper__plus::before {
            width: 50%;
            height: 2px;
        }
        
        .van-stepper__minus::after,
        .van-stepper__plus::after {
            width: 2px;
            height: 50%;
        }
        
        .van-slider__button {
            width: 24px;
            height: 24px;
            background-color: #fff;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgb(0 0 0 / 20%);
        }
        
        .van-nav-bar {
            position: relative;
            z-index: 1;
            line-height: 22px;
            text-align: center;
            color: #FFFFFF;
            -webkit-user-select: none;
            user-select: none;
background: rgba(0, 0, 0, .40);
        }
        
        .van-cell::after {
            position: absolute;
            box-sizing: border-box;
            content: ' ';
            pointer-events: none;
            right: 0px;
            bottom: 0;
            left: 16px;
            border-bottom: 0.8px solid #cacaca;
            -webkit-transform: scaleY(.5);
            transform: scaleY(.5);
        }
        
        .van-collapse-item--border::after {
            position: absolute;
            box-sizing: border-box;
            content: ' ';
            pointer-events: none;
            top: 0;
            right: 0px;
            left: 16px;
            border-top: 0.8px solid #cacaca;
            -webkit-transform: scaleY(.5);
            transform: scaleY(.5);
        }
        
        .van-radio__icon--checked .van-icon {
            color: #c1c1c1;
            background-color: #ffffff00;
            border-color: #c1c1c1;
        }
        
        .van-stepper__minus {
            border-radius: 5px 0 0 5px;
        }
        
        .van-stepper__plus {
            border-radius: 0 5px 5px 0;
        }
        
        .van-hairline--bottom::after {
            border-bottom-width: 0px;
        }
        
        .van-collapse-item__title .van-cell__right-icon::before {
            -webkit-transform: rotate(0deg) translateZ(0);
            transform: rotate(0deg) translateZ(0);
            -webkit-transition: -webkit-transform .3s;
            transition: -webkit-transform .3s;
            transition: transform .3s;
            transition: transform .3s, -webkit-transform .3s;
        }
        
        .van-collapse-item__title--expanded .van-cell__right-icon::before {
            -webkit-transform: rotate(90deg);
            transform: rotate(90deg);
        }
	</style>
</head>

<body>
	<div id="app">
		<div class="aymenu" ref="menuMain">

			<div @touchstart="titleTouchStart" @touchmove="titleTouchMove">
				<van-nav-bar title="Funimate">
					<template #right>
						<van-icon @click="closeMenu" name="close" size="24" color="#e6f608" /><!-- å…³é—­ç”¨çš„Xçš„é¢œè‰² -->
					</template>
				</van-nav-bar>
			</div>
			<div class="menuBody" ref="menuBody">
				<div v-if="!bsok"><!-- BSæ·»åŠ å‘½ä»¤ -->
					<div class="title" style="color: #e90707;">å…¬å‘Š</div><!-- BSæ·»åŠ å‘½ä»¤ -->
					<div class="title" style="color: #a06206;">å¼€å¯è‡ªå·±éœ€è¦åŠŸèƒ½</div><!-- BSæ·»åŠ å‘½ä»¤ -->
					<div class="title" style="color: #14f608;">  </div><!-- BSæ·»åŠ å‘½ä»¤ -->
					<div class="title" style="color: #147287;">å¤§å‰å¤§åˆ©,ä»Šæ™šåƒé¸¡ï¼</div><!-- BSæ·»åŠ å‘½ä»¤ -->
					<div class="title" style="color: #0858d8;">   </div><!-- BSæ·»åŠ å‘½ä»¤ -->
					<van-cell-group inset><!-- BSæ·»åŠ å‘½ä»¤ -->
						<van-field v-model="BSCard" center label="è¾“å…¥å¡å¯†" placeholder="è¯·è¾“å…¥å¡å¯†"><!-- BSæ·»åŠ å‘½ä»¤ -->
							<template #button><!-- BSæ·»åŠ å‘½ä»¤ -->
								<van-button size="small" type="default" @click="BSLogin">ç™»å½•</van-button><!-- BSæ·»åŠ å‘½ä»¤ -->
							</template><!-- BSæ·»åŠ å‘½ä»¤ -->
						</van-field><!-- BSæ·»åŠ å‘½ä»¤ -->
					</van-cell-group><!-- BSæ·»åŠ å‘½ä»¤ -->
				</div><!-- BSæ·»åŠ å‘½ä»¤ -->
				<div v-if="bsok"><!-- BSæ·»åŠ å‘½ä»¤ -->
					<van-cell-group inset>
						<van-cell center title="ç»˜åˆ¶å¼€å…³">
							<template #right-icon>
								<van-tabs v-model="checkboxList.isDraw" type="card" style="width: 60%;">
									<van-tab title="å¼€å¯" name="1"></van-tab>
									<van-tab title="å…³é—­" name="2"></van-tab>
								</van-tabs>
							</template>
						</van-cell>
						<van-cell center title="ä¸»æ’­æ¨¡å¼">
							<template #right-icon>
								<van-tabs v-model="isLive" @change="changeLive" type="card" style="width: 60%;">
									<van-tab title="å¼€å¯" name="1"></van-tab>
									<van-tab title="å…³é—­" name="2"></van-tab>
								</van-tabs>
							</template>
						</van-cell>
					
					</van-cell-group>

					<br>
					<van-cell-group inset>
						<van-collapse v-model="active" accordion>
							<van-collapse-item title="äººç‰©ç»˜åˆ¶">
								<van-cell center title="å°„çº¿">
									<template #right-icon>
										<van-switch v-model="checkboxList.isLine" size="20" active-color="#34c85a"
											inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="æ–¹æ¡†">
									<template #right-icon>
										<van-switch v-model="checkboxList.isBox" size="20" active-color="#34c85a"
											inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="è¡€é‡">
									<template #right-icon>
										<van-switch v-model="checkboxList.isHP" size="20" active-color="#34c85a"
											inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="ä¿¡æ¯">
									<template #right-icon>
										<van-switch v-model="checkboxList.isInfo" size="20" active-color="#34c85a"
											inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="è·ç¦»">
									<template #right-icon>
										<van-switch v-model="checkboxList.isDis" size="20" active-color="#34c85a"
											inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="æ‰‹æŒ">
									<template #right-icon>
										<van-switch v-model="checkboxList.isShouChi" size="20" active-color="#34c85a"
											inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="èƒŒæ•Œ">
									<template #right-icon>
										<van-switch v-model="checkboxList.isBeid" size="20" active-color="#34c85a"
											inactive-color="#e9e9eb" />
									</template>
								</van-cell>
								<van-cell center title="é›·è¾¾">
									<template #right-icon>
										<van-switch v-model="checkboxList.isleida" size="20" active-color="#34c85a"
											inactive-color="#e9e9eb" />
									</template>
								</van-cell>
							</van-collapse-item>
						</van-collapse>
					</van-cell-group>

					<br>
					<van-cell-group inset>
					
						<van-cell center title="ç»˜åˆ¶é£æ ¼">
							<template #right-icon>
								<van-tabs v-model="huizhi" type="card" style="width: 60%;">
									<van-tab title="ç»å…¸" name="1"></van-tab>
									<van-tab title="ç®€æ´" name="2"></van-tab>
								</van-tabs>
							</template>
						</van-cell>
						<van-cell center title="æ–¹æ¡†é£æ ¼">
							<template #right-icon>
								<van-tabs v-model="fangkuang" type="card" style="width: 60%;">
									<van-tab title="æ™®é€š2D" name="1"></van-tab>
									<van-tab title="åŠ¨æ€3D" name="2"></van-tab>
								</van-tabs>
							</template>
						</van-cell>
						<van-cell center title="ç»˜åˆ¶å¸§ç‡">
							<template #right-icon>
								<van-tabs v-model="fps" @change="fuckfps" type="card" style="width: 60%;">
									<van-tab title="60å¸§" name="30"></van-tab>
									<van-tab title="90å¸§" name="21"></van-tab>
									<van-tab title="120å¸§" name="16"></van-tab>
								</van-tabs>
							</template>
						</van-cell>
						<van-collapse v-model="active2" accordion>
							<van-collapse-item title="é›·è¾¾å‚æ•°">
								<van-cell center title="é›·è¾¾æ¨ªå‘ç§»åŠ¨">
									<template #right-icon>
										<van-slider v-model="leidaX" :min="0" :max="500" bar-height="3px"
											style="width: 35%;">
										</van-slider>&nbsp;&nbsp;&nbsp;&nbsp;
										<van-stepper v-model="leidaX" :min="0" :max="500" button-size="26" disable-input
											integer />
									</template>
								</van-cell>
								<van-cell center title="é›·è¾¾å‚ç›´ç§»åŠ¨">
									<template #right-icon>
										<van-slider v-model="leidaY" :min="0" :max="200" bar-height="3px"
											style="width: 35%;">
										</van-slider>&nbsp;&nbsp;&nbsp;&nbsp;
										<van-stepper v-model="leidaY" :min="0" :max="200" button-size="26" disable-input
											integer />
									</template>
								</van-cell>
								<van-cell center title="é›·è¾¾å¤§å°">
									<template #right-icon>
										<van-tabs v-model="leida" type="card" style="width: 60%;">
											<van-tab title="å¤§" name="1"></van-tab>
											<van-tab title="ä¸­" name="2"></van-tab>
											<van-tab title="å°" name="3"></van-tab>
										</van-tabs>
									</template>
								</van-cell>
							</van-collapse-item>
							<van-collapse-item title="ç»˜å›¾å‚æ•°">
								<van-cell center title="ç»˜åˆ¶èŒƒå›´">
									<template #right-icon>
										<van-slider v-model="dis" :min="0" :max="500" bar-height="3px"
											style="width: 63%;">
											<template #button>
												<div class="custom-button">{{dis}}</div>
											</template>
										</van-slider>
									</template>
								</van-cell>
								<van-cell center title="è§‚é€é˜Ÿæ ‡">
									<template #right-icon>
										<van-slider v-model="team" :min="0" :max="100" bar-height="3px"
											style="width: 63%;">
											<template #button>
												<div class="custom-button">{{team}}</div>
											</template>
										</van-slider>
									</template>
								</van-cell>
								<van-cell center title="é¡¶éƒ¨è°ƒæ•´">
									<template #right-icon>
										<van-slider v-model="renshu" :min="0" :max="100" bar-height="3px"
											style="width: 63%;">
											<template #button>
												<div class="custom-button">{{renshu}}</div>
											</template>
										</van-slider>
									</template>
								</van-cell>
								<van-cell center title="çº¿æ¡ç²—ç»†">
									<template #right-icon>
										<van-stepper v-model="xian" min="1" max="10" theme="round" button-size="22"
											disable-input />
									</template>
								</van-cell>
							</van-collapse-item>
						</van-collapse>
					</van-cell-group>
				</div>
			</div>
		</div><!-- BSæ·»åŠ å‘½ä»¤ -->
	</div>
</body>
<script>
	let app = new Vue({
		el: '#app',
		data() {
			return {
				BSCard: "",
				bsok: false,
				active: false,
				active1: false,
				active2: false,
				active3: false,
				active4: false,

				checkboxList: {
					isDraw: '2', //å¼€å…³
					isLine: true, //å°„çº¿
					isBox: true, //æ–¹æ¡†
					isBone:false, //éª¨éª¼
					isHP: true, //è¡€é‡
					isInfo: true, //ä¿¡æ¯
					isDis: true, //è·ç¦»
					isShouChi: false, //æ‰‹æŒ
					isBeid: true, //èƒŒæ•Œ
					isleida: false, //é›·è¾¾
					isvehicle: true, //è½½å…·
					ishezi: false, //ç›’å­
				},
				naijiu: false, //è€ä¹…  
				youhao: false, //æ²¹è€—
				wuhou: false, //æ— å
				judian: false, //èšç‚¹
				jingfang: false, //é•œé˜²
				zimiao: false, //è¾…åŠ©ç„å‡†
				zimiaodx: 100, //åœˆå¤§å°
				zimiaojl: 50, //åœˆè·ç¦»

				leidaX: 250, //é›·è¾¾x
				leidaY: 50, //é›·è¾¾y
				renshu: 40, //äººæ•°
				xian: 2, //çº¿æ¡
				isLive: '2', //ç›´æ’­å¼€å…³
				leida: '1', //é›·è¾¾å¤§å°
				tietu: '2', //è´´å›¾å¼€å…³
				huizhi: '2', //ç»˜åˆ¶é£æ ¼
				guge: 'bg', //éª¨éª¼é£æ ¼
				fangkuang: '1', //æ–¹æ¡†é£æ ¼
				fps: '21', //ç»˜åˆ¶å¸§ç‡
				dis: '500', //ç»˜åˆ¶èŒƒå›´
				zaijufw: '500', //è½½å…·èŒƒå›´
				gugefw: '50', //éª¨éª¼èŒƒå›´
				team: '0', //è§‚æˆ˜é˜Ÿæ ‡

				teamcolor: { //é˜Ÿæ ‡é¢œè‰²
					1: '#DC143C',
					2: '#FFB6C1',
					3: '#FF69B4',
					4: '#FF00FF',
					5: '#7B68EE',
					6: '#F58220',
					7: '#6495ED',
					8: '#1E90FF',
					9: '#426ab3',
					10: '#00FFFF',
					11: '#7FFFD4',
					12: '#90EE90',
					13: '#FFFF00',
					14: '#F0E68C',
					15: '#FFA500',
					16: '#FF8C00',
					17: '#8B4513',
					18: '#FF6347',
					19: '#CD5C5C',
					20: '#C0C0C0',
					21: '#696969',
					22: '#66CDAA',
					23: '#FFD700',
					24: '#FFE4E1',
					25: '#8B008B',
					26: '#5C2223',
					27: '#482936',
					28: '#C45A65',
					29: '#440E25',
					30: '#36292F',
					31: '#5D3F51',
					32: '#681752',
					33: '#3E3841',
					34: '#ED556A',
					35: '#7A7374',
					36: '#EA517F',
					37: '#3161AB',
					38: '#2474B5',
					39: '#93B5CF',
					40: '#2177B8',
					41: '#2D2E36',
					42: '#5E6E6D',
					43: '#61649F',
					44: '#475164',
					45: '#2B333E',
					46: '#15559A',
					47: '#5E7987',
					48: '#74787A',
					49: '#1781B5',
					50: '#BBB5AC',
					51: '#FF9900',
					52: '#AD9E5F',
					53: '#DC9123',
					54: '#97846C',
					55: '#E3BD8D',
					56: '#4D4030',
					57: '#F8C387',
					58: '#FA7E23',
					59: '#E2D849',
					60: '#5E5314',
					61: '#AD9E5F',
					62: '#FED71A',
					63: '#E4BF11',
					64: '#D2B42C',
					65: '#F8DF72',
					66: '#DDC871',
					67: '#93D5DC',
					68: '#57C3C2',
					69: '#1BA784',
					70: '#428675',
					71: '#69A794',
					72: '#FF7F50',
					73: '#E9967A',
					74: '#B8860B',
					75: '#DAA520',
					76: '#F0E68C',
					77: '#9ACD32',
					78: '#00FA9A',
					79: '#66CDAA',
					80: '#2F4F4F',
					81: '#5F9EA0',
					82: '#5F9EA0',
					83: '#6495ED',
					84: '#87CEFA',
					85: '#F5DEB3',
					86: '#FFFACD',
					87: '#D2691E',
					88: '#CD853F',
					89: '#DEB887',
					90: '#BC8F8F',
					91: '#FFDEAD',
					92: '#FFE4E1',
					93: '#FFEFD5',
					94: '#F5FFFA',
					95: '#E6E6FA',
					96: '#F0FFF0',
					97: '#DCDCDC',
					98: '#D8BFD8',
					99: '#B22222',
					100: '#808080',
				},

				zaiju: { //è½½å…·
					0: 'è‡ªè¡Œè½¦',
					3348: 'æ—…è¡Œè½¦',
					3309: 'ä¸‰è½®',
					3301: 'è¹¦è¹¦',
					3305: 'å‰æ™®',
					3302: 'å‰æ™®',
					3304: 'å‰æ™®',
					3306: 'è½¿è½¦',
					3336: 'åŒè·‘',
					3312: 'è½¿è½¦',
					3314: 'çš®å¡',
					3310: 'çš®å¡',
					3308: 'æ‘©æ‰˜',
					3315: 'å°ç»µç¾Š',
					3335: 'å¤§è„šè½¦',
					3325: 'å¿«è‰‡',
					3326: 'æ‘©æ‰˜è‰‡',
					3307: 'é¢åŒ…è½¦',
					3342: 'è¶Šé‡æ‘©æ‰˜',
					3329: 'è£…ç”²è½¦',
					3334: 'æ»‘ç¿”æœº',
					3345: 'æ³¢æ³¢çƒ',
				},

				shouchi: { //æ‰‹æŒ
					0: 'æ‹³å¤´',
					101001: 'AKM',
					101002: 'M16A4',
					101003: 'SCAR-L',
					101004: 'M416',
					101005: 'GROZA',
					101006: 'AUG',
					101007: 'QBZ',
					101008: 'M762',
					101009: 'Mk47',
					101010: 'G36C',
					101011: 'AC-VAL',
					101012: 'èœœç¾',
					102001: 'UZI',
					102003: 'Vector',
					102004: 'æ±¤å§†é€Š',
					102005: 'é‡ç‰›',
					102007: 'MP5K',
					102105: 'P90',
					103013: 'M417',
					103004: 'SKS',
					103006: 'Mini14',
					103009: 'SLR',
					103005: 'VSS',
					103010: 'QBU',
					103007: 'Mk14',
					103003: 'AWM',
					103903: 'AWM',
					103002: 'M24',
					103011: 'è«è¾›çº³ç”˜',
					103901: 'Kar98K',
					103001: 'Kar98K',
					103008: 'Win94',
					103012: 'AMR',
					102002: 'UMP45',
					104002: 'S1897',
					104001: 'S686',
					104100: 'SPAS-12',
					104004: 'DBS',
					104003: 'S12K',
					105002: 'DP-28',
					107001: 'åå­—å¼©',
					107006: 'æˆ˜æœ¯å¼©',
					105010: 'MG3',
					105001: 'M249',
					107007: 'çˆ†ç‚¸çŒå¼“',
					108004: 'å¹³åº•é”…',
					108003: 'é•°åˆ€',
					108002: 'æ’¬æ£',
					108001: 'å¤§ç åˆ€',
					106001: 'P92',
					106002: 'P1911',
					106003: 'R1895',
					106004: 'P18C',
					106005: 'R45',
					106006: 'æ•£å¼¹æ‰‹æª',
					106008: 'èå¼æ‰‹æª',
					106010: 'æ²™æ¼ ä¹‹é¹°',
					602004: 'æ‰‹æ¦´å¼¹',
					602001: 'éœ‡çˆ†å¼¹',
					602002: 'çƒŸé›¾å¼¹',
					602003: 'ç‡ƒçƒ§ç“¶',
					602075: 'é“çƒ­å¼¹',
					103014: 'MK20-H',
				},
			}
		},
		mounted() {
			this.setRect(370, 355);
		},
		methods: {
			BSLogin() {
				var response = BSPHP.login(this.BSCard); //BSæ·»åŠ 
				if (response.indexOf("01|1081") != -1) {//BSæ·»åŠ 
					vant.Toast("ç™»å½•æˆåŠŸ");//BSæ·»åŠ 
					this.bsok = true;//BSæ·»åŠ 
				} else {//BSæ·»åŠ 
					vant.Toast("ç™»å½•å¤±è´¥");//BSæ·»åŠ 
					this.bsok = false;//BSæ·»åŠ 
				}//BSæ·»åŠ 
			},//BSæ·»åŠ  æŠ¬å¤´çš„æ‹¬å·ä¹Ÿè¦å•ç‹¬åŠ 
			setRect(w, h, x = -1, y = -1) {
				var boxW = w;
				var boxH = h;

				var ayMenu = this.$refs.menuMain;
				ayMenu.style.width = `${boxW}px`;
				ayMenu.style.height = `${boxH}px`;
				if (x == -1) ayMenu.style.left = `calc(50% - ${boxW / 2}px)`;
				if (y == -1) ayMenu.style.top = `calc(50% - ${boxH / 2}px)`;


				var menuBody = this.$refs.menuBody;
				menuBody.style.height = `${boxH - 46 - 40}px`;
			},
			titleTouchStart(event) {
				this.touchStartX = parseInt(event.touches[0].clientX);
				this.touchStartY = parseInt(event.touches[0].clientY);

				var ayMenu = this.$refs.menuMain;
				this.menuLastX = ayMenu.offsetLeft;
				this.menuLastY = ayMenu.offsetTop;
			},
			titleTouchMove(event) {
				event.preventDefault();
				var distanceX = event.touches[0].clientX - this.touchStartX;
				var distanceY = event.touches[0].clientY - this.touchStartY;

				var ayMenu = this.$refs.menuMain;
				ayMenu.style.left = this.menuLastX + distanceX + "px";
				ayMenu.style.top = this.menuLastY + distanceY + "px";
			},

			closeMenu() {
				var menu = document.querySelector("#app");
				menu.style.display = "none";
				setWindowTouch(false);
			},




			changeLive() {
				if (window.changeLive == 1) {
					window.changeLive = 0;
					let hideView = h5gg.loadPlugin("ayHide", "h5gg_hideview.dylib");
					setButtonImage("http://111.67.201.204:5000/admin.jpg");
					//å…³é—­è¿‡ç›´æ’­
					hideView.changeHidden(0);
					//HOOKæºè§¦æ‘¸å‡½æ•°ï¼ŒåŒæ­¥è¿‡ç›´æ’­viewçš„è§¦æ‘¸å¼€å…³
					let orig_setWindowTouch = setWindowTouch;
					setWindowTouch = function (isTouch) {
						let boolNum = isTouch ? 1 : 0;
						hideView.changeTouch(boolNum);
						orig_setWindowTouch(isTouch);
					}
				} else {
					window.changeLive = 1;
					let hideView = h5gg.loadPlugin("ayHide", "h5gg_hideview.dylib");
					setButtonImage("http://111.67.201.204:5000/admin.jpg");
					//å¼€å¯è¿‡ç›´æ’­
					hideView.changeHidden(1);
					//HOOKæºè§¦æ‘¸å‡½æ•°ï¼ŒåŒæ­¥è¿‡ç›´æ’­viewçš„è§¦æ‘¸å¼€å…³
					let orig_setWindowTouch = setWindowTouch;
					setWindowTouch = function (isTouch) {
						let boolNum = isTouch ? 1 : 0;
						hideView.changeTouch(boolNum);
						orig_setWindowTouch(isTouch);
					}
				}
			},

			fuckfps() {
				clearInterval(window.drawTimer);
				window.drawTimer = setInterval(function () {
					if (app.checkboxList.isDraw) {
						//console.log("1");
						shadowDraw();
						if (!window.fpscount) window.fpscount = 0;
						if (!window.fpstime) window.fpstime = performance.now();
						window.fpscount++;
						if ((performance.now() - window.fpstime) > 2000) {
							window.fps = window.fpscount;
							window.fpstime = performance.now();
							window.fpscount = 0;
						}
						ctx.textBaseline = "top";
						ctx.textAlign = "center";
						ctx.font = '40px "Arial, sans-serif"';
						ctx.fillStyle = "aqua";
						if (window.fps) ctx.fillText("FPS: " + window.fps, 150, 50);
					} else {
						clearCtx();
					}
				}, app.fps);
			},
		}
	});

	//è„šæœ¬æ”¾åœ¨æœ€åé¢, bodyåŠ è½½å®Œä¹‹åå†æ‰§è¡Œ
	//æ¿€æ´»webkitçš„button:active
	document.body.addEventListener('touchstart', function () { });
	//è®¾ç½®ä¸å¯æ‹–åŠ¨
	setWindowDrag(0, 0, 0, 0);
	//è®¾ç½®æŒ‰ç…§å±å¹•åƒç´ å°ºå¯¸ç»˜å›¾(é«˜æ¸…æ¨¡å¼)
	const iosScale = window.devicePixelRatio;
	let sWidth = 0; //å±å¹•å®½
	let sHeight = 0; //å±å¹•é«˜
	//åˆ›å»ºç”»å¸ƒï¼Œå¸ƒæ»¡æ•´ä¸ªå±å¹•
	let canvasDom = document.createElement("canvas");
	document.body.appendChild(canvasDom);
	canvasDom.style.height = "100%";
	canvasDom.style.width = "100%";


	//è·å–çª—å£ä¿¡æ¯
	const layout = function () {
		//window.orientationæ˜¯è®¾å¤‡æ¡æŒæ–¹å‘, ä¸æ˜¯å±å¹•æ˜¾ç¤ºæ–¹å‘
		if (window.lastorientation == window.orientation) return;
		window.lastorientation = window.orientation;
		//window.screenä¸­çš„å®½é«˜ä¸ä¼šéšç€å±å¹•æ—‹è½¬æ›´æ–°(åªä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™å›ºå®š)
		if (Math.abs(window.orientation) == 90) {
			//æ¨ªå±æ¨¡å¼
			setWindowRect(0, 0, window.screen.height, window.screen.width);
			canvasDom.width = window.screen.height * iosScale;
			canvasDom.height = window.screen.width * iosScale;
			sWidth = window.screen.height;
			sHeight = window.screen.width;
		} else {
			//ç«–å±æ¨¡å¼
			setWindowRect(0, 0, window.screen.width, window.screen.height);
			canvasDom.height = window.screen.height * iosScale;
			canvasDom.width = window.screen.width * iosScale;
			sWidth = window.screen.width;
			sHeight = window.screen.height;
		}
	}

	layout();//è®¾ç½®æ—‹è½¬å±å¹•æ—¶è‡ªåŠ¨è°ƒæ•´å¸ƒå±€å’Œç”»å¸ƒ
	window.addEventListener("orientationchange", layout, false);
	setButtonImage("http://111.67.201.204:5000/admin.jpg");
	//*è®¾ç½®è‡ªå®šä¹‰çš„æ‚¬æµ®æŒ‰é’®å›¾æ ‡ç‚¹å‡»åŠ¨ä½œ
	setButtonAction(function () {
		let menu = document.querySelector("#app");
		if (menu.style.display == 'none') {
			menu.style.display = 'block';
			//éšè—èœå•ä¹‹å, è®¾ç½®è§¦æ§ç©¿é€æ‚¬æµ®çª—å£
			setWindowTouch(true);
		} else {
			menu.style.display = 'none';
			//æ˜¾ç¤ºèœå•ä¹‹å, è®¾ç½®è§¦æ§ä¸å¯ç©¿é€æ‚¬æµ®çª—å£
			setWindowTouch(false);
		}
	});

	const ctx = canvasDom.getContext('2d');
	setLineWidth(iosScale);
	var fontFamily = " Arial";
	var cacheTimer = null; //æ•°æ®ç¼“å­˜è®¡æ—¶å™¨ï¼Œå‡å°‘éå†æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½
	var drawTimer = null; //ç»˜å›¾è®¡æ—¶å™¨ï¼Œæ§åˆ¶å¸§ç‡
	var actorCache = []; //å¯¹è±¡åœ°å€ç¼“å­˜
	//è·å–è¿›ç¨‹
	//åŸæœ‰let baseAddr = Number(h5gg.getRangesList(0)[0].start); //aslråªè¯»ä¸€æ¬¡ï¼Œèƒ½å‡å°‘ğŸ”ğŸ±é‚£ä¹ˆä¸€ç‚¹æ€§èƒ½æ¶ˆè€—
	//åŸæœ‰let GWorld = 0; //ä¸–ç•Œå…¨å±€å˜é‡ï¼Œå…¬ç”¨
	function pid() {
            if (!h5gg.getProcList("ShadowTrackerExt")[0]) { alert("è¯·æ‰“å¼€æ¸¸æˆ!"); pid(); } else {

                //è·å–è¿›ç¨‹pid      
                var name = h5gg.getProcList("ShadowTrackerExt")[0].pid;
                //è®¾ç½®è¿›ç¨‹ä¸ºä¿®æ”¹ç›®æ ‡
                h5gg.setTargetProc(name);
                h5gg.clearResults();
            }
        }
        pid()
        var X = h5gg.getRangesList('ShadowTrackerExtra');
        var baseAddr = Number(X[0].start);
        var GWorld = 0;
        let myTeam = 0


	function drawCache() {
		if (isNull(GWorld)) return;
		const Level = readLong(GWorld + 0x90); //Level* PersistentLevel
		//LineBatchComponent* LineBatcher
		//LineBatchComponent* ForegroundLineBatcher
		//è·å–æ‰€æœ‰å¯¹è±¡æ•°ç»„
		const ActorArray = readLong(Level + 0xA0);
		//LineBatchComponent* PersistentLineBatcher
		//GameNetworkManager* NetworkManager
		//è·å–æ‰€æœ‰å¯¹è±¡çš„æ•°é‡
		const ActorCount = readInt(Level + 0xA8);
		const tempArr = [];
		//éå†
		for (var i = 0; i < ActorCount; i++) {
        var actor = readLong(ActorArray + i * 8);
        if (isNull(actor)) continue;

        //HealthMax
            var hpmax = readFloat(actor + 0xd68);

        if (hpmax == 100 || hpmax == 110|| hpmax == 120 || hpmax == 140 || hpmax == 160 || hpmax == 180 || hpmax == 200) {
          tempArr.push(actor);
        }
      }
      actorCache = tempArr;
	}

	function shadowDraw() {

		clearCtx();
      //ä¸–ç•Œåœ°å€
        GWorld = readLong(baseAddr + 0xB064888);
      if (isNull(GWorld)) return;
      //NetDriver* NetDriver
      var NetDriver = readLong(GWorld + 0x98);
      //NetConnection* ServerConnection
      var ServerConnection = readLong(NetDriver + 0x88);
      var localPlayerController = readLong(ServerConnection + 0x30);

        var mySelf = readLong(localPlayerController + 0x538);
      //if (isNull(mySelf)) return;
      //int TeamID
        var teamCopy = readInt(mySelf + 0xa48);
      myTeam = teamCopy <= 100 ? teamCopy : myTeam
      //PlayerCameraManager* PlayerCameraManager
        var playerCameraManager = readLong(localPlayerController + 0x5c0);
      
      if (isNull(playerCameraManager)) return;
      //TViewTarget ViewTarget
        var povAddr = playerCameraManager + 0x1140 + 0x10;
      var camViewInfo = {
        Location: {
          X: readFloat(povAddr),
          Y: readFloat(povAddr + 4),
          Z: readFloat(povAddr + 4 + 4)
        },
        Rotation: {
          Pitch: readFloat(povAddr + 0x18),
          Yaw: readFloat(povAddr + 0x18 + 4),
          Roll: readFloat(povAddr + 0x18 + 4 + 4)
        },
        FOV: readFloat(povAddr + 0x24)
      }
		//é›·è¾¾ï¼Œè·å–ç›¸æœºæ—‹è½¬è§†è§’
		let camAngle = camViewInfo.Rotation.Yaw;
		//ä¸€å¸§åªè®¡ç®—ä¸€æ¬¡ï¼Œå‡å°‘æ€§èƒ½æ¶ˆè€—
		const tempMatrix = RotatorToMatrix(camViewInfo.Rotation);

		let playerCout = 0;
		let ai = 0;
		let topEnemy = 0;
		let vehicle = 0;

		for (let i = 0; i < actorCache.length; i++) {
			//æ’é™¤è‡ªå·±
			const actor = actorCache[i];
			if (mySelf == actor) continue;
			//æ­»äº¡åˆ¤æ–­ bDead
            const bDead = readInt(actor + 0xdc8)
			if (bDead != 2) continue;
			//æ’é™¤é˜Ÿå‹
            const team = readInt(actor + 0xa48); //int TeamID
			if (myTeam == team) continue;
			//æ’é™¤å°é»„é¸¡
			if (team == -1) continue;
			//æ’é™¤å½“å‰è§‚æˆ˜é˜Ÿä¼
			if (team == app.team) continue;
			//æœ€å¤§ç”Ÿå‘½å€¼
            const hpmax = readFloat(actor + 0xd68); //float HealthMax;	
			//è·å–ç”Ÿå‘½å€¼
            const hp = readFloat(actor + 0xd60); //float Health;
			const renhp = 100 * hp / hpmax;
			//è·å–äººç‰©çŠ¶æ€
            const StatusOffset = readInt(actor + 0x12c8); //PawnStateRepSyncData PawnStateRepSyncData  
            const rootComponent = readLong(actor + 0x268); //SceneComponent* RootComponent
			if (isNull(rootComponent)) continue;

			const worldPos = {
				X: readFloat(rootComponent + 0x1B0),
                Y: readFloat(rootComponent + 0x1B0 + 4),
                Z: readFloat(rootComponent + 0x1B0 + 4 + 4)
			}
			
		
			



			//è®¡ç®—è·ç¦»
			const distX = (worldPos.X - camViewInfo.Location.X) / 100;
			const distY = (worldPos.Y - camViewInfo.Location.Y) / 100;
			let distance = (distX * distX) + (distY * distY);
			const distZ = (worldPos.Z - camViewInfo.Location.Z) / 100;
			distance = Math.ceil(Math.sqrt((distZ * distZ) + distance));
			//æ•Œäººyaw  å•ä½ï¼šè§’åº¦
            const angleOffset = readFloat(actor + 0x550);
			//é›·è¾¾è·å–æ•Œäººä¸–ç•Œåæ ‡
			const wradPos = {
				X: distX,
				Y: distY,
				dist: distance
			};
			const wAngle = (180.0 / Math.PI) * Math.atan2(wradPos.Y, wradPos.X); //é›·è¾¾ï¼Œè§’åº¦ç›¸å…³
			const Angle = camAngle - wAngle + 90; //é›·è¾¾ï¼Œè§’åº¦ç›¸å…³
			const towards = angleOffset - camAngle - 90; //é›·è¾¾æ•Œäººè§†è§’æœå‘

			//é›·è¾¾è·å–æ•Œäººå±å¹•åæ ‡
			const radPos = {
				X: wradPos.dist * Math.cos(Angle / 180.0 * Math.PI),
				Y: wradPos.dist * Math.sin(Angle / 180.0 * Math.PI)
			};

			const zb1 = {
				X: worldPos.X,
				Y: worldPos.Y,
				Z: worldPos.Z + 80.0
			}

			const zb2 = {
				X: worldPos.X,
				Y: worldPos.Y,
				Z: worldPos.Z - 80.0
			}

			//é¡¶éƒ¨æ–¹æ¡†çº¿
			const fkzb1 = world2Screen(zb1, camViewInfo, tempMatrix);
			//åº•éƒ¨æ–¹æ¡†çº¿
			const fkzb2 = world2Screen(zb2, camViewInfo, tempMatrix);
			const fkgao = fkzb2.Y - fkzb1.Y;
			const fkkuan = fkgao / 2;
			//æ‰‹æŒæªæ¢°
            const lastUpdateStatusKeyListOffset = 0x29a8; //LastUpdateStatusKeyList
			const equipWeaponOffset = 0x20; //STExtraWeapon* EquipWeapon
			const weaponOffset = lastUpdateStatusKeyListOffset + equipWeaponOffset;
            const weaponIDOffset = 0x9a8; //int RepWeaponID
			const my_weapon = readLong(actor + weaponOffset);
			const weaponid = readInt(my_weapon + weaponIDOffset);
			//è½½å…·
            const nameId = readLong(actor + 0x7bc);
			const vehicleid = readLong(actor + 0x16fc).toString().slice(0, 4);
            const vehicleCommonComponent = readLong(actor + 0xa28); //é€šç”¨ç»„ä»¶ //VehicleCommonComponent* VehicleCommon;
            const vehicleHPMax = readFloat(vehicleCommonComponent + 0x1b4); //æœ€å¤§è¡€é‡ //float HPMax;
            const vehicleHP = readFloat(vehicleCommonComponent + 0x1b8); //è¡€é‡ //float HP;
			const cartHP = 100 * vehicleHP / vehicleHPMax;
            const vehicleFuelMax = readFloat(vehicleCommonComponent + 0x1d4); //æœ€å¤§æ²¹é‡ //float FuelMax;
            const vehicleFuel = readFloat(vehicleCommonComponent + 0x1d8); //æ²¹é‡ //float Fuel;
			const cartFuel = 100 * vehicleFuel / vehicleFuelMax;
			if (nameId != 1) {
                const bIsAI = Number(h5gg.getValue(actor + 0xa64, "U8")); //bool bIsAI
				//ä¼å…µè®¡æ•°
				if (StatusOffset == 33554448 || StatusOffset == 33554449) topEnemy += 1;
				//è¯»åå­—å¯èƒ½æ¶ˆè€—æ€§èƒ½ï¼Œä¸éœ€è¦æ³¨é‡Šå³å¯â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸â¬‡ï¸
				//åªå¯¹ç»å…¸é£æ ¼ç”Ÿæ•ˆ
				//PlayerName
				let name = "";
				if (app.checkboxList.isInfo) {
					//è¶…å‡ºå±å¹•ä¸è®¡ç®—
					if (fkzb1.X > 0 && fkzb1.Y > 0 && fkzb1.X < sWidth && fkzb1.Y < sHeight) {
                        const nameAddr = readLong(actor + 0x9d0);
						name = nameAddr.toString(16);
						if (!isNull(nameAddr)) {
							name = "";
							for (let s = 0; s < 14; s++) {
								const after = Number(h5gg.getValue(nameAddr + s * 2, "U8")).toString(16).padStart(2, '0');
								const before = Number(h5gg.getValue(nameAddr + s * 2 + 1, "U8")).toString(16).padStart(2, '0');
								const charCode = before + after;
								if (charCode == "0000") break;
								name += String.fromCharCode(parseInt(charCode, 16));
							}
						}
					}
				}
				//è¯»åå­—å¯èƒ½æ¶ˆè€—æ€§èƒ½ï¼Œä¸éœ€è¦æ³¨é‡Šå³å¯â¬†ï¸â¬†ï¸â¬†ï¸â¬†ï¸â¬†ï¸â¬†ï¸

				//drawText("é›·ç¥", sWidth / 5.5, 15, 15, "red", true);//å±å¹•æ˜¾ç¤º

				/***************éª¨éª¼å‡½æ•°*******************/
				//éª¨éª¼å‡½æ•° æœªæ›´æ–°ä¸‰ä¸ª
                const Mesh = readLong(actor + 0x5b8);
                const human = Mesh + 0x1A0;
                const boneArray = readLong(Mesh + 0x6c0);
				const meshTrans = {
					Rotation: {
						x: readFloat(human),
						y: readFloat(human + 4),
						z: readFloat(human + 8),
						w: readFloat(human + 12),
					},
					Translation: {
						X: readFloat(human + 16),
						Y: readFloat(human + 20),
						Z: readFloat(human + 24),
						W: readFloat(human + 28),
					},
					Scale3D: {
						X: readFloat(human + 32),
						Y: readFloat(human + 36),
						Z: readFloat(human + 40),
					},
				}
				const c2wMatrix = TransformToMatrix(meshTrans);

				let bonetou = {
					X: 0,
					Y: 0
				};
				let bonebz = {
					X: 0,
					Y: 0
				};
				let bonezj = {
					X: 0,
					Y: 0
				};
				let boneyj = {
					X: 0,
					Y: 0
				};
				let bonezz = {
					X: 0,
					Y: 0
				};
				let boneyz = {
					X: 0,
					Y: 0
				};
				let bonezs = {
					X: 0,
					Y: 0
				};
				let boneys = {
					X: 0,
					Y: 0
				};
				let bonepg = {
					X: 0,
					Y: 0
				};
				let bonezp = {
					X: 0,
					Y: 0
				};
				let boneyp = {
					X: 0,
					Y: 0
				};
				let bonezx = {
					X: 0,
					Y: 0
				};
				let boneyx = {
					X: 0,
					Y: 0
				};
				let bonezjo = {
					X: 0,
					Y: 0
				};
				let boneyjo = {
					X: 0,
					Y: 0
				};

				if (app.checkboxList.isBone) {
					//åŠ¨æ€éª¨éª¼ è¶…å‡ºå±å¹•ä¸è®¡ç®—
					if (distance <= app.gugefw && fkzb1.X > 0 && fkzb1.Y > 0 && fkzb1.X < sWidth && fkzb1.Y < sHeight) {
						if (app.guge == 'qg') {
							bonetou = getBoneWorldPos(boneArray + 6 * 48, c2wMatrix); //å¤´
							bonebz = getBoneWorldPos(boneArray + 5 * 48, c2wMatrix); //è„–å­
							bonezj = getBoneWorldPos(boneArray + 12 * 48, c2wMatrix); //å·¦è‚©
							boneyj = getBoneWorldPos(boneArray + 33 * 48, c2wMatrix); //å³è‚©
							bonezz = getBoneWorldPos(boneArray + 13 * 48, c2wMatrix); //å·¦è‚˜
							boneyz = getBoneWorldPos(boneArray + 34 * 48, c2wMatrix); //å³è‚˜
							bonezs = getBoneWorldPos(boneArray + 14 * 48, c2wMatrix); //å·¦æ‰‹
							boneys = getBoneWorldPos(boneArray + 35 * 48, c2wMatrix); //å³æ‰‹
							bonepg = getBoneWorldPos(boneArray + 1 * 48, c2wMatrix); //éª¨ç›†
							bonezx = getBoneWorldPos(boneArray + 54 * 48, c2wMatrix); //å·¦è†ç›–
							boneyx = getBoneWorldPos(boneArray + 58 * 48, c2wMatrix); //å³è†ç›–
							bonezjo = getBoneWorldPos(boneArray + 55 * 48, c2wMatrix); //å·¦è„š
							boneyjo = getBoneWorldPos(boneArray + 59 * 48, c2wMatrix); //å³è„š
						} else if (app.guge == 'bg') {
							bonepg = getBoneWorldPos(boneArray + 1 * 48, c2wMatrix); //éª¨ç›†
							bonezx = getBoneWorldPos(boneArray + 54 * 48, c2wMatrix); //å·¦è†ç›–
							boneyx = getBoneWorldPos(boneArray + 58 * 48, c2wMatrix); //å³è†ç›–
							bonezjo = getBoneWorldPos(boneArray + 55 * 48, c2wMatrix); //å·¦è„š
							boneyjo = getBoneWorldPos(boneArray + 59 * 48, c2wMatrix); //å³è„š
						}
					}
				}
				let dtbonetou = world2Screen(bonetou, camViewInfo, tempMatrix); //å¤´
				let dtbonebz = world2Screen(bonebz, camViewInfo, tempMatrix); //è„–å­
				let dtbonezj = world2Screen(bonezj, camViewInfo, tempMatrix); //å·¦è‚©
				let dtboneyj = world2Screen(boneyj, camViewInfo, tempMatrix); //å³è‚©
				let dtbonezz = world2Screen(bonezz, camViewInfo, tempMatrix); //å·¦è‚˜
				let dtboneyz = world2Screen(boneyz, camViewInfo, tempMatrix); //å³è‚˜
				let dtbonezs = world2Screen(bonezs, camViewInfo, tempMatrix); //å·¦æ‰‹
				let dtboneys = world2Screen(boneys, camViewInfo, tempMatrix); //å³æ‰‹
				let dtbonepg = world2Screen(bonepg, camViewInfo, tempMatrix); //éª¨ç›†
				let dtbonezx = world2Screen(bonezx, camViewInfo, tempMatrix); //å·¦è†ç›–
				let dtboneyx = world2Screen(boneyx, camViewInfo, tempMatrix); //å³è†ç›–
				let dtbonezjo = world2Screen(bonezjo, camViewInfo, tempMatrix); //å·¦è„š
				let dtboneyjo = world2Screen(boneyjo, camViewInfo, tempMatrix); //å³è„š
				/***************åŠ¨æ€éª¨éª¼*******************/

				/***************åŠ¨æ€3dæ¡†*******************/
				if (app.checkboxList.isBox && app.fangkuang == '2' || app.zimiao) {
					if (distance <= 100 && fkzb1.X > 0 && fkzb1.Y > 0 && fkzb1.X < sWidth && fkzb1.Y < sHeight) {
						bonetou = getBoneWorldPos(boneArray + 6 * 48, c2wMatrix); //å¤´	
					}
				}
				let bonetou3d = world2Screen(bonetou, camViewInfo, tempMatrix); //å¤´
				const rwg = 88; //z
				const rwk = 33; //x,y
				const rwk2 = (Math.sqrt(2 * rwk * rwk));

				//3dæ–¹æ¡†ä¸Š
				const zqs = {
					X: worldPos.X + rwk2 * Math.cos((angleOffset + 135) * Math.PI / 180),
					Y: worldPos.Y + rwk2 * Math.sin((angleOffset + 135) * Math.PI / 180),
					Z: bonetou.Z + 16
				}
				const yqs = {
					X: worldPos.X + rwk2 * Math.cos((angleOffset + 45) * Math.PI / 180),
					Y: worldPos.Y + rwk2 * Math.sin((angleOffset + 45) * Math.PI / 180),
					Z: bonetou.Z + 16
				}
				const zhs = {
					X: worldPos.X + rwk2 * Math.cos((angleOffset + 225) * Math.PI / 180),
					Y: worldPos.Y + rwk2 * Math.sin((angleOffset + 225) * Math.PI / 180),
					Z: bonetou.Z + 16
				}
				const yhs = {
					X: worldPos.X + rwk2 * Math.cos((angleOffset + 315) * Math.PI / 180),
					Y: worldPos.Y + rwk2 * Math.sin((angleOffset + 315) * Math.PI / 180),
					Z: bonetou.Z + 16
				}

				//3dæ–¹æ¡†ä¸‹
				const zqx = {
					X: worldPos.X + rwk2 * Math.cos((angleOffset + 135) * Math.PI / 180),
					Y: worldPos.Y + rwk2 * Math.sin((angleOffset + 135) * Math.PI / 180),
					Z: worldPos.Z - rwg
				}
				const yqx = {
					X: worldPos.X + rwk2 * Math.cos((angleOffset + 45) * Math.PI / 180),
					Y: worldPos.Y + rwk2 * Math.sin((angleOffset + 45) * Math.PI / 180),
					Z: worldPos.Z - rwg
				}
				const zhx = {
					X: worldPos.X + rwk2 * Math.cos((angleOffset + 225) * Math.PI / 180),
					Y: worldPos.Y + rwk2 * Math.sin((angleOffset + 225) * Math.PI / 180),
					Z: worldPos.Z - rwg
				}
				const yhx = {
					X: worldPos.X + rwk2 * Math.cos((angleOffset + 315) * Math.PI / 180),
					Y: worldPos.Y + rwk2 * Math.sin((angleOffset + 315) * Math.PI / 180),
					Z: worldPos.Z - rwg
				}
				//ä¸Š
				const zhs1 = world2Screen(zhs, camViewInfo, tempMatrix);
				const yhs1 = world2Screen(yhs, camViewInfo, tempMatrix);
				const zqs1 = world2Screen(zqs, camViewInfo, tempMatrix);
				const yqs1 = world2Screen(yqs, camViewInfo, tempMatrix);
				//ä¸‹
				const zhx1 = world2Screen(zhx, camViewInfo, tempMatrix);
				const yhx1 = world2Screen(yhx, camViewInfo, tempMatrix);
				const zqx1 = world2Screen(zqx, camViewInfo, tempMatrix);
				const yqx1 = world2Screen(yqx, camViewInfo, tempMatrix);
				/***************3Dæ¡†*******************/

				//è®°å½•è¦ç»˜åˆ¶çš„å…¨éƒ¨ä¿¡æ¯
				const actorInfo = {
					x: fkzb1.X, //xåæ ‡
					y: fkzb1.Y, //yåæ ‡
					w: fkkuan, //å®½
					h: fkgao, //é«˜
					//hp: hp, //ç”Ÿå‘½å€¼
					hp: renhp, //ç”Ÿå‘½å€¼
					isAI: bIsAI, //æ˜¯å¦ä¸ºæœºå™¨äºº
					team: team, //é˜Ÿä¼
					name: name, //åå­—
					dis: distance, //è·ç¦»
					weaponid: weaponid, //æ‰‹æŒæªæ¢°
					radx: radPos.X, //é›·è¾¾xåæ ‡
					rady: radPos.Y, //é›·è¾¾yåæ ‡
					towards: towards, //äººç‰©æœå‘
					zt: StatusOffset, //äººç‰©çŠ¶æ€

					//3dx
					zhsx: zhs1.X,
					yhsx: yhs1.X,
					zqsx: zqs1.X,
					yqsx: yqs1.X,

					zhxx: zhx1.X,
					yhxx: yhx1.X,
					zqxx: zqx1.X,
					yqxx: yqx1.X,

					//3dy
					zhsy: zhs1.Y,
					yhsy: yhs1.Y,
					zqsy: zqs1.Y,
					yqsy: yqs1.Y,

					zhxy: zhx1.Y,
					yhxy: yhx1.Y,
					zqxy: zqx1.Y,
					yqxy: yqx1.Y,
					toux: bonetou3d.X,
					touy: bonetou3d.Y,

					//åŠ¨æ€éª¨éª¼
					bonetoux: dtbonetou.X,
					bonetouy: dtbonetou.Y,
					bonebzx: dtbonebz.X,
					bonebzy: dtbonebz.Y,
					bonezjx: dtbonezj.X,
					bonezjy: dtbonezj.Y,
					boneyjx: dtboneyj.X,
					boneyjy: dtboneyj.Y,
					bonezzx: dtbonezz.X,
					bonezzy: dtbonezz.Y,
					boneyzx: dtboneyz.X,
					boneyzy: dtboneyz.Y,
					bonezsx: dtbonezs.X,
					bonezsy: dtbonezs.Y,
					boneysx: dtboneys.X,
					boneysy: dtboneys.Y,
					bonepgx: dtbonepg.X,
					bonepgy: dtbonepg.Y,
					bonezxx: dtbonezx.X,
					bonezxy: dtbonezx.Y,
					boneyxx: dtboneyx.X,
					boneyxy: dtboneyx.Y,
					bonezjox: dtbonezjo.X,
					bonezjoy: dtbonezjo.Y,
					boneyjox: dtboneyjo.X,
					boneyjoy: dtboneyjo.Y,

				};
				if (distance < app.dis) { //å¯è°ƒç»˜åˆ¶èŒƒå›´
					shadowInfo(actorInfo);
				}
				if (bIsAI) {
					ai++;
				} else {
					playerCout++;
				}
			} else {
				//è½½å…·
				if (app.checkboxList.isvehicle) {
					if (app.huizhi == '1') color = "white";
					if (app.huizhi == '2') color = "yellow";
					if (cartHP > 0 && distance > 10 && distance <= app.zaijufw && fkzb1.X > 0 && fkzb1.Y > 0 && fkzb1.X < sWidth && fkzb1.Y < sHeight) {
						//ç±»å‹
						const zaiju = app.zaiju[vehicleid];
						drawText(zaiju + `[${distance}m]`, fkzb1.X, fkzb1.Y - 10, 10, color, "center", true);
						//è€ä¹…
						if (app.naijiu) {
							drawCircular(fkzb1.X - 9, fkzb1.Y + 20, Math.ceil(cartHP), 7, "#28ff1d", 3, false);
							drawText("ğŸ©¸", fkzb1.X - 9, fkzb1.Y + 9, 7, "yellow", "center", true);
						}
						//æ²¹é‡
						if (app.youhao) {
							drawCircular(fkzb1.X + 9, fkzb1.Y + 20, Math.ceil(cartFuel), 7, "#28ff1d", 3, false);
							drawText("ğŸ›¢ï¸", fkzb1.X + 9, fkzb1.Y + 9, 7, "yellow", "center", true);
						}
					}
				}
				vehicle++;
			}
		}

		//ä¼å…µ
		if (topEnemy > 0) {
			drawText(`ç©ºé™æ•Œäºº: ${topEnemy}`, sWidth / 2, sHeight / 8, 22, "yellow", "center", true);//âš ï¸
		}
		//äººæ•°ç»Ÿè®¡
		drawRoundRect(sWidth / 2 - 90, 0 + app.renshu, 0, 0, 0, 'rgba(255,255,255,0.5)', true); //åˆ©ç”¨åœ†è§’çŸ©å½¢å¡«å…… åŸå§‹ sWidth / 2 - 90, 0 + app.renshu, 180, 38, 20
		if (playerCout + ai > 0) {
			drawText(" ", sWidth / 2, - 30 + app.renshu, 32, "white", "center", true);//âš ï¸
		}
		if (playerCout + ai < 1) {
			drawText(" ", sWidth / 2, - 30 + app.renshu, 32, "white", "center", true);//â™»ï¸
		}
		drawText(" ", sWidth / 2 - 60, - 25 + app.renshu, 28, "white", "center", true);//ğŸ§›ğŸ»
		drawText(" ", sWidth / 2 + 62, - 25 + app.renshu, 28, "white", "center", true);//ğŸ”
		//çœŸäººæ€»æ•°
		drawText(playerCout, sWidth / 2 - 30, - 20 + app.renshu, 25, playerCout > 0 ? "#f00" : "white", "center", true);
		//äººæœºæ€»æ•°
		drawText(ai, sWidth / 2 + 32, - 20 + app.renshu, 25, ai > 0 ? "lime" : "white", "center", true);

		//é›·è¾¾
		if (app.checkboxList.isleida) {
			if (app.leida == '1') { //é›·è¾¾å¤§
				//èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢
				drawCircular(100 + app.leidaX, 100 + app.leidaY, 100, 100, "rgba(0,0,0,0.15)", true); //å¤§åœˆåœˆåœ†å½¢å¡«å……
				drawCircular(100 + app.leidaX, 100 + app.leidaY, 100, 100, "khaki", 2, false); //å¤§åœˆåœˆ
				drawCircular(100 + app.leidaX, 100 + app.leidaY, 100, 60, "pink", 2, false); //å°åœˆåœˆ
				drawLine(30 + app.leidaX, 30 + app.leidaY, 100 + app.leidaX, 100 + app.leidaY, "yellow", 2); //å·¦ç«–æ–œçº¿
				drawLine(170 + app.leidaX, 30 + app.leidaY, 100 + app.leidaX, 100 + app.leidaY, "yellow", 2); //å³ç«–æ–œçº¿
			} else if (app.leida == '2') { //é›·è¾¾ä¸­
				//èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢
				drawCircular(80 + app.leidaX, 80 + app.leidaY, 100, 80, "rgba(0,0,0,0.15)", 2); //å¤§åœˆåœˆåœ†å½¢å¡«å……
				drawCircular(80 + app.leidaX, 80 + app.leidaY, 100, 80, "khaki", 2, false); //å¤§åœˆåœˆ
				drawCircular(80 + app.leidaX, 80 + app.leidaY, 100, 48, "pink", 2, false); //å°åœˆåœˆ
				drawLine(24 + app.leidaX, 24 + app.leidaY, 80 + app.leidaX, 80 + app.leidaY, "yellow", 2); //å·¦ç«–æ–œçº¿
				drawLine(136 + app.leidaX, 24 + app.leidaY, 80 + app.leidaX, 80 + app.leidaY, "yellow", 2); //å³ç«–æ–œçº¿
			} else if (app.leida == '3') { //é›·è¾¾å°
				//èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢
				drawCircular(60 + app.leidaX, 60 + app.leidaY, 100, 60, "rgba(0,0,0,0.15)", true); //å¤§åœˆåœˆåœ†å½¢å¡«å……
				drawCircular(60 + app.leidaX, 60 + app.leidaY, 100, 60, "khaki", 2, false); //å¤§åœˆåœˆ
				drawCircular(60 + app.leidaX, 60 + app.leidaY, 100, 36, "pink", 2, false); //å°åœˆåœˆ
				drawLine(18 + app.leidaX, 18 + app.leidaY, 60 + app.leidaX, 60 + app.leidaY, "yellow", 2); //å·¦ç«–æ–œçº¿
				drawLine(102 + app.leidaX, 18 + app.leidaY, 60 + app.leidaX, 60 + app.leidaY, "yellow", 2); //å³ç«–æ–œçº¿
			}
		}
	}
	

	function shadowInfo(objectInfo) {
		//äººæœºåˆ¤æ–­ æ˜¯çš„è¯å¯¹æ ‡å˜ä¸ºAI
		if (objectInfo.isAI) objectInfo.team = "AI";

		//é›·è¾¾
		if (app.checkboxList.isleida) {
			if (app.leida == '1') { //é›·è¾¾å¤§
				if (objectInfo.dis < 340) {
					//ç»˜åˆ¶åœ†å½¢å¸¦ç®­å¤´ ä¸­å¿ƒç‚¹xy,åŠå¾„, ç®­å¤´æ—‹è½¬è§’åº¦, åœ†å½¢é¢œè‰²ï¼Œç®­å¤´é¢œè‰²ï¼ˆé›·è¾¾ç‚¹æœå‘ï¼‰
					drawCMark((objectInfo.radx / 3.5 + 100) + app.leidaX, (-objectInfo.rady / 3.5 + 100) + app.leidaY, 4, objectInfo.towards, objectInfo.hp <= 0 ? "white" : objectInfo.isAI ? "lime" : "red", "white");
				}
			} else if (app.leida == '2') { //é›·è¾¾ä¸­
				if (objectInfo.dis < 340) {
					drawCMark((objectInfo.radx / 4.4 + 80) + app.leidaX, (-objectInfo.rady / 4.4 + 80) + app.leidaY, 3.2, objectInfo.towards, objectInfo.hp <= 0 ? "white" : objectInfo.isAI ? "lime" : "red", "white");
				}
			} else if (app.leida == '3') { //é›·è¾¾å°
				if (objectInfo.dis < 340) {
					drawCMark((objectInfo.radx / 5.8 + 60) + app.leidaX, (-objectInfo.rady / 5.8 + 60) + app.leidaY, 2.4, objectInfo.towards, objectInfo.hp <= 0 ? "white" : objectInfo.isAI ? "lime" : "red", "white");
				}
			}
		}

		//å°„çº¿
		if (app.checkboxList.isLine) {
			if (app.huizhi == '1') color = "white";
			if (app.huizhi == '1' && objectInfo.isAI) color = "#28ff1d";
			if (app.huizhi == '2') color = "#28ff1d";
			if (app.huizhi == '2' && objectInfo.isAI) color = "white";
			if (objectInfo.hp > 0) {
				if (app.huizhi == '1' && app.tietu == '1') {
					drawLine(sWidth / 2, 10 + app.renshu, objectInfo.x, objectInfo.y - 30, objectInfo.isAI ? "white" : objectInfo.dis >= 300 ? "black" : objectInfo.dis >= 200 ? "green" : objectInfo.dis >= 100 ? "yellow" : objectInfo.dis >= 50 ? "blue" : "red");
				} else if (app.huizhi == '2' || app.huizhi == '1' && app.tietu == '2') {
					drawLine(sWidth / 2, 10 + app.renshu, objectInfo.x, objectInfo.y - 30, objectInfo.isAI ? "white" : objectInfo.dis >= 300 ? "black" : objectInfo.dis >= 200 ? "green" : objectInfo.dis >= 100 ? "yellow" : objectInfo.dis >= 50 ? "blue" : "red");
				}
			}
		}

		//è‡ªç„ç»˜å›¾
		if (app.zimiao) {
			//åœ†åœˆ
			drawCircular(sWidth / 2, sHeight / 2, 100, app.zimiaodx, "red", 1, false);
			if (objectInfo.dis <= app.zimiaojl && objectInfo.x > 0 && objectInfo.y > 0 && objectInfo.x < sWidth && objectInfo.y < sHeight) {
				//çº¿æ¡
				drawLine(objectInfo.toux, objectInfo.touy, sWidth / 2, sHeight / 2, "aqua", 2);
			}
		}

		//è¶…å‡ºå±å¹•åªç»˜åˆ¶å°„çº¿ èƒŒæ•Œ
		if (objectInfo.x < 0 || objectInfo.y < 0 || objectInfo.x > sWidth || objectInfo.y > sHeight) {
			// èƒŒæ•Œ
			if (app.checkboxList.isBeid) {
				if (objectInfo.x < 0) objectInfo.x = 20;
				if (objectInfo.y < 0) objectInfo.y = 20;
				if (objectInfo.x > sWidth) objectInfo.x = sWidth - 20;
				if (objectInfo.y > sHeight) objectInfo.y = sHeight - 20;
				drawCircular(objectInfo.x, objectInfo.y, 100, 15, objectInfo.isAI ? "rgba(0,255,0,0.6)" : "rgba(255,0,0,0.6)", true);
				drawText(`${objectInfo.dis}m`, objectInfo.x, objectInfo.y - 16, 10, "white", "center", true);
			}
			return
		}

		//ç»˜åˆ¶é£æ ¼
		if (app.huizhi == '1') {
			//æ–¹æ¡†
			if (app.checkboxList.isBox) {
				//æ–¹æ¡†é£æ ¼
				if (app.fangkuang == '1') {
					//2Då·¡æŸ¥æ–¹æ¡†
					drawMyRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <= 0 ? "yellow" : "#00ffff", false);
				} else if (app.fangkuang == '2') {
					//åŠ¨æ€3Dæ–¹æ¡† è·ç¦»å°äº100ç±³ç»˜åˆ¶3dæ¡†
					if (objectInfo.dis <= 100) {
						//ä¸Š
						drawLine(objectInfo.yqsx, objectInfo.yqsy, objectInfo.zqsx, objectInfo.zqsy, objectInfo.hp <= 0 ? "yellow" : "white", app.xian);
						drawLine(objectInfo.zqsx, objectInfo.zqsy, objectInfo.zhsx, objectInfo.zhsy, objectInfo.hp <= 0 ? "yellow" : "white", app.xian);
						drawLine(objectInfo.zhsx, objectInfo.zhsy, objectInfo.yhsx, objectInfo.yhsy, objectInfo.hp <= 0 ? "yellow" : "white", app.xian);
						drawLine(objectInfo.yhsx, objectInfo.yhsy, objectInfo.yqsx, objectInfo.yqsy, objectInfo.isAI ? "lime" : "red", app.xian);
						//ä¸‹
						drawLine(objectInfo.yqxx, objectInfo.yqxy, objectInfo.zqxx, objectInfo.zqxy, objectInfo.hp <= 0 ? "yellow" : "white", app.xian);
						drawLine(objectInfo.zqxx, objectInfo.zqxy, objectInfo.zhxx, objectInfo.zhxy, objectInfo.hp <= 0 ? "yellow" : "white", app.xian);
						drawLine(objectInfo.zhxx, objectInfo.zhxy, objectInfo.yhxx, objectInfo.yhxy, objectInfo.hp <= 0 ? "yellow" : "white", app.xian);
						drawLine(objectInfo.yhxx, objectInfo.yhxy, objectInfo.yqxx, objectInfo.yqxy, objectInfo.isAI ? "lime" : "red", app.xian);
						//ä»ä¸Šåˆ°ä¸‹
						drawLine(objectInfo.zhsx, objectInfo.zhsy, objectInfo.zhxx, objectInfo.zhxy, objectInfo.hp <= 0 ? "yellow" : "white", app.xian);
						drawLine(objectInfo.yhsx, objectInfo.yhsy, objectInfo.yhxx, objectInfo.yhxy, objectInfo.isAI ? "lime" : "red", app.xian);
						drawLine(objectInfo.zqsx, objectInfo.zqsy, objectInfo.zqxx, objectInfo.zqxy, objectInfo.hp <= 0 ? "yellow" : "white", app.xian);
						drawLine(objectInfo.yqsx, objectInfo.yqsy, objectInfo.yqxx, objectInfo.yqxy, objectInfo.isAI ? "lime" : "red", app.xian);
						//è·ç¦»å¤§äº100ç±³ç»˜åˆ¶2dæ¡†
					} else if (objectInfo.dis > 100) {
						//drawMyRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <= 0 ? "yellow" : objectInfo.isAI ? "lime" : "#00ffff", false);
						drawRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <= 0 ? "yellow" : objectInfo.isAI ? "lime" : "red", false, app.xian);
					}
				}
			}

			//éª¨éª¼
			if (app.checkboxList.isBone) {
				if (objectInfo.dis <= app.gugefw) {
					//åŠ¨æ€å…¨éª¨
					if (app.guge == 'qg') {
						//drawCircular(objectInfo.bonetoux, objectInfo.bonetouy - 1, 100, objectInfo.w/9, 'yellow', false);
						drawLine(objectInfo.bonetoux, objectInfo.bonetouy, objectInfo.bonebzx, objectInfo.bonebzy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonebzx, objectInfo.bonebzy, objectInfo.bonezjx, objectInfo.bonezjy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonebzx, objectInfo.bonebzy, objectInfo.boneyjx, objectInfo.boneyjy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonezjx, objectInfo.bonezjy, objectInfo.bonezzx, objectInfo.bonezzy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.boneyjx, objectInfo.boneyjy, objectInfo.boneyzx, objectInfo.boneyzy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonezzx, objectInfo.bonezzy, objectInfo.bonezsx, objectInfo.bonezsy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.boneyzx, objectInfo.boneyzy, objectInfo.boneysx, objectInfo.boneysy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonebzx, objectInfo.bonebzy, objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.bonezxx, objectInfo.bonezxy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonezxx, objectInfo.bonezxy, objectInfo.bonezjox, objectInfo.bonezjoy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.boneyxx, objectInfo.boneyxy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.boneyxx, objectInfo.boneyxy, objectInfo.boneyjox, objectInfo.boneyjoy, objectInfo.isAI ? "white" : "yellow", app.xian);
						//åŠ¨æ€åŠéª¨
					} else if (app.guge == 'bg') {
						drawLine(objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.bonezxx, objectInfo.bonezxy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonezxx, objectInfo.bonezxy, objectInfo.bonezjox, objectInfo.bonezjoy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.boneyxx, objectInfo.boneyxy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.boneyxx, objectInfo.boneyxy, objectInfo.boneyjox, objectInfo.boneyjoy, objectInfo.isAI ? "white" : "yellow", app.xian);
					}
				} else if (objectInfo.dis > app.gugefw) {
					//å·¡æŸ¥2Dæ–¹æ¡†
					drawMyRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <= 0 ? "yellow" : "#00ffff", false);
				}
			}

			//è·ç¦»
			if (app.checkboxList.isDis) {
				drawText("[" + objectInfo.dis + "m]", objectInfo.x, objectInfo.y - 53, 10, "white", "right", true);
			}

			//ä¿¡æ¯
			if (app.checkboxList.isInfo) {
				const teamcolor = app.teamcolor[objectInfo.team];
				//å€’ä¸‰è§’å½¢ å¼€å§‹ç‚¹ï¼Œx,y é€”å¾„ï¼Œx,y ç»ˆç‚¹ï¼Œx,y
				drawTriangle(objectInfo.x - 3, objectInfo.y - 12, objectInfo.x, objectInfo.y - 6, objectInfo.x + 3, objectInfo.y - 12, teamcolor, 0.5, true);
				//é˜Ÿæ ‡èƒŒæ™¯
				drawRectangle(objectInfo.x - 46, objectInfo.y - 29, 16, 14, teamcolor, 0.8, true);
				//åå­—èƒŒæ™¯
				drawRectangle(objectInfo.x - 30, objectInfo.y - 29, 75, 14, teamcolor, 0.5, true);
				//é˜Ÿæ ‡æ–‡å­—
				drawText(objectInfo.team, objectInfo.x - 38, objectInfo.y - 38, 10, "#FFF", "center", true);
				//åå­—æ–‡å­—
				if (objectInfo.name.length > 7) objectInfo.name = `${objectInfo.name.slice(0, 6)}...`
				drawText(objectInfo.name, objectInfo.x + 8, objectInfo.y - 38, 10, "#FFF", "center", true);
			}

			//è¡€é‡
			if (app.checkboxList.isHP) {
				//ç»˜åˆ¶åœ†è§’çŸ©å½¢ï¼Œèµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œåœ†è§’åŠå¾„ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢
				drawRoundRect(objectInfo.x - 46, objectInfo.y - 15, 91, 3, 0, "rgba(0,0,0,0.4)", true); //åˆ©ç”¨å®å¿ƒçŸ©å½¢å¡«å……
				drawRoundRect(objectInfo.x - 46, objectInfo.y - 15, Math.ceil(objectInfo.hp / 1.1), 3, 0, objectInfo.hp <= 30 ? "rgba(255,0,0,0.8)" : "rgba(255,255,255,0.8)", true);
			}

			//æ‰‹æŒè´´å›¾
			if (app.tietu == '1') {
				var pngY = "60";
				if (app.checkboxList.isLine == false && app.checkboxList.isShouChi == false && app.checkboxList.isDis == false) pngY = "48";
				//æ–°è´´å›¾
				//è·å–æªæ¢°å›¾æ ‡
				var img = new Image();
				img.src = "Map/" + app.shouchi[objectInfo.weaponid] + ".png"
				//ç»˜åˆ¶æªæ¢°å›¾æ ‡
				circleImgTwo(img, objectInfo.x - 28, objectInfo.y - pngY, 56, 16);

			}

			//æ‰‹æŒ
			if (app.checkboxList.isShouChi) {
				//è´´å›¾ 
				/*const shouchi2 = app.shouchi2[objectInfo.weaponid];
				if (app.tietu == '1') {
				drawImage(shouchi2, objectInfo.x - 22, objectInfo.y - 63, 44, 23, true);//(è·¯å¾„ï¼Œè·¯å¾„ï¼Œä½ç½®ï¼Œå®½é«˜)
				}*/
				//æ–‡å­—
				//drawText("[" + objectInfo.weaponid + "m]", objectInfo.x, objectInfo.y - 63, 10, "white", "right", true);		
				const shouchi = app.shouchi[objectInfo.weaponid];
				if (objectInfo.hp > 0) {
					drawText("[" + shouchi + "]", objectInfo.x, objectInfo.y - 53, 10, "white", "left", true);
				} else if (objectInfo.hp <= 0) {
					drawText("[å€’åœ°]", objectInfo.x, objectInfo.y - 53, 10, "white", "left", true);
				}
			}
		} else if (app.huizhi == '2') {
			//æ–¹æ¡†
			if (app.checkboxList.isBox) {
				//æ–¹æ¡†é£æ ¼
				if (app.fangkuang == '1') {
					//å·¡æŸ¥2Dæ–¹æ¡†
					drawMyRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <= 0 ? "yellow" : "#00ffff", false);
				} else if (app.fangkuang == '2') {
					//åŠ¨æ€3Dæ–¹æ¡† è·ç¦»å°äº100ç±³ç»˜åˆ¶3dæ¡†
					if (objectInfo.dis <= 100) {
						//ä¸Š
						drawLine(objectInfo.yqsx, objectInfo.yqsy, objectInfo.zqsx, objectInfo.zqsy, objectInfo.hp <= 0 ? "yellow" : "#28ff1d", app.xian);
						drawLine(objectInfo.zqsx, objectInfo.zqsy, objectInfo.zhsx, objectInfo.zhsy, objectInfo.hp <= 0 ? "yellow" : "#28ff1d", app.xian);
						drawLine(objectInfo.zhsx, objectInfo.zhsy, objectInfo.yhsx, objectInfo.yhsy, objectInfo.hp <= 0 ? "yellow" : "#28ff1d", app.xian);
						drawLine(objectInfo.yhsx, objectInfo.yhsy, objectInfo.yqsx, objectInfo.yqsy, objectInfo.isAI ? "white" : "red", app.xian);
						//ä¸‹
						drawLine(objectInfo.yqxx, objectInfo.yqxy, objectInfo.zqxx, objectInfo.zqxy, objectInfo.hp <= 0 ? "yellow" : "#28ff1d", app.xian);
						drawLine(objectInfo.zqxx, objectInfo.zqxy, objectInfo.zhxx, objectInfo.zhxy, objectInfo.hp <= 0 ? "yellow" : "#28ff1d", app.xian);
						drawLine(objectInfo.zhxx, objectInfo.zhxy, objectInfo.yhxx, objectInfo.yhxy, objectInfo.hp <= 0 ? "yellow" : "#28ff1d", app.xian);
						drawLine(objectInfo.yhxx, objectInfo.yhxy, objectInfo.yqxx, objectInfo.yqxy, objectInfo.isAI ? "white" : "red", app.xian);
						//ä»ä¸Šåˆ°ä¸‹
						drawLine(objectInfo.zhsx, objectInfo.zhsy, objectInfo.zhxx, objectInfo.zhxy, objectInfo.hp <= 0 ? "yellow" : "#28ff1d", app.xian);
						drawLine(objectInfo.yhsx, objectInfo.yhsy, objectInfo.yhxx, objectInfo.yhxy, objectInfo.isAI ? "white" : "red", app.xian);
						drawLine(objectInfo.zqsx, objectInfo.zqsy, objectInfo.zqxx, objectInfo.zqxy, objectInfo.hp <= 0 ? "yellow" : "#28ff1d", app.xian);
						drawLine(objectInfo.yqsx, objectInfo.yqsy, objectInfo.yqxx, objectInfo.yqxy, objectInfo.isAI ? "white" : "red", app.xian);
						//å¤§äº100ç±³ç»˜åˆ¶2dæ¡†
					} else if (objectInfo.dis > 100) {
						//drawMyRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <= 0 ? "yellow" : objectInfo.isAI ? "white" : "#00ffff", false);
						drawRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <= 0 ? "yellow" : objectInfo.isAI ? "white" : "#28ff1d", false, app.xian);
					}
				}
			}

			//éª¨éª¼
			if (app.checkboxList.isBone) {
				if (objectInfo.dis <= app.gugefw) {
					//åŠ¨æ€å…¨éª¨
					if (app.guge == 'qg') {
						//drawCircular(objectInfo.bonetoux, objectInfo.bonetouy - 1, 100, objectInfo.w/9, 'yellow', false);
						drawLine(objectInfo.bonetoux, objectInfo.bonetouy, objectInfo.bonebzx, objectInfo.bonebzy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonebzx, objectInfo.bonebzy, objectInfo.bonezjx, objectInfo.bonezjy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonebzx, objectInfo.bonebzy, objectInfo.boneyjx, objectInfo.boneyjy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonezjx, objectInfo.bonezjy, objectInfo.bonezzx, objectInfo.bonezzy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.boneyjx, objectInfo.boneyjy, objectInfo.boneyzx, objectInfo.boneyzy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonezzx, objectInfo.bonezzy, objectInfo.bonezsx, objectInfo.bonezsy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.boneyzx, objectInfo.boneyzy, objectInfo.boneysx, objectInfo.boneysy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonebzx, objectInfo.bonebzy, objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.bonezxx, objectInfo.bonezxy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonezxx, objectInfo.bonezxy, objectInfo.bonezjox, objectInfo.bonezjoy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.boneyxx, objectInfo.boneyxy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.boneyxx, objectInfo.boneyxy, objectInfo.boneyjox, objectInfo.boneyjoy, objectInfo.isAI ? "white" : "yellow", app.xian);
						//åŠ¨æ€åŠéª¨
					} else if (app.guge == 'bg') {
						drawLine(objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.bonezxx, objectInfo.bonezxy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonezxx, objectInfo.bonezxy, objectInfo.bonezjox, objectInfo.bonezjoy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.bonepgx, objectInfo.bonepgy, objectInfo.boneyxx, objectInfo.boneyxy, objectInfo.isAI ? "white" : "yellow", app.xian);
						drawLine(objectInfo.boneyxx, objectInfo.boneyxy, objectInfo.boneyjox, objectInfo.boneyjoy, objectInfo.isAI ? "white" : "yellow", app.xian);
					}
				} else if (objectInfo.dis > app.gugefw) {
					//å·¡æŸ¥2Dæ–¹æ¡†
					drawMyRect(objectInfo.x - objectInfo.w / 2, objectInfo.y, objectInfo.w, objectInfo.h, objectInfo.hp <= 0 ? "yellow" : "#00ffff", false);
				}
			}

			//è·ç¦»
			if (app.checkboxList.isDis) {
				drawText(objectInfo.dis, objectInfo.x, objectInfo.y - 47, 10, "#FFF", "center", true);
			}

			//ä¿¡æ¯
			if (app.checkboxList.isInfo) {
				//é˜Ÿæ ‡ åå­—
				//if (objectInfo.name.length > 7) objectInfo.name = `${objectInfo.name.slice(0, 6)}...`
				drawText(objectInfo.team + " " + objectInfo.name, objectInfo.x, objectInfo.y - 28, 10, "yellow", "center", true);
			}

			// è¡€æ¡
			if (app.checkboxList.isHP) {
				drawCircular(objectInfo.x, objectInfo.y - 31, Math.ceil(objectInfo.hp), 11, objectInfo.hp <= 30 ? "red" : "#28ff1d", 5, false);
			}
		}
	}

	// ********************* ç»˜å›¾ç›¸å…³ *********************

	//æ¸…ç©ºç”»å¸ƒ
	function clearCtx() {
		ctx.clearRect(0, 0, canvasDom.width, canvasDom.height);
	}

	//è®¾ç½®çº¿å®½
	function setLineWidth(w) {
		ctx.lineWidth = w;
	}

	//ç»˜åˆ¶å›¾ç‰‡æµ‹è¯•
	function circleImgTwo(img, x, y, w, h) {
		x *= iosScale;
		y *= iosScale;
		w *= iosScale;
		h *= iosScale;
		ctx.globalAlpha = 0.8;
		ctx.drawImage(img, x, y, w, h);
	}

	//ç»˜åˆ¶åœ†å½¢å¸¦ç®­å¤´ ä¸­å¿ƒç‚¹xy,åŠå¾„, ç®­å¤´æ—‹è½¬è§’åº¦, åœ†å½¢é¢œè‰²ï¼Œç®­å¤´é¢œè‰²ï¼ˆé›·è¾¾ç‚¹æœå‘ï¼‰
	function drawCMark(x, y, radius, angle, cColor, dColor) {
		x *= iosScale;
		y *= iosScale;
		radius *= iosScale;

		var startAngle = (Math.PI / 180) * (-30 + angle);
		var endAngle = (Math.PI / 180) * (30 + angle);

		//åœ†å½¢
		ctx.beginPath();
		ctx.fillStyle = cColor;
		ctx.arc(x, y, radius, 0, 360, false);
		ctx.fill();
		ctx.closePath();

		//ç®­å¤´
		ctx.beginPath();
		ctx.fillStyle = dColor;
		ctx.arc(x, y, radius + radius * 0.15, startAngle, endAngle, false);

		var rx = x + (x + radius * 1.7 - x) * Math.cos(angle * Math.PI / 180) - (y - y) * Math.sin(angle * Math.PI / 180);
		var ry = y + (x + radius * 1.7 - x) * Math.sin(angle * Math.PI / 180) + (y - y) * Math.cos(angle * Math.PI / 180);

		ctx.lineTo(rx, ry);
		ctx.fill();
		ctx.closePath();
	}

	//ç»˜åˆ¶ä¸‰è§’å½¢ï¼Œèµ·å§‹ç‚¹xyï¼Œç»ˆç‚¹xyï¼Œé¢œè‰²ï¼Œé€æ˜åº¦ï¼Œæ˜¯å¦å¡«å……
	function drawTriangle(x1, y1, x2, y2, x3, y3, color, globalAlpha, isFill = true) {
		x1 *= iosScale;
		y1 *= iosScale;
		x2 *= iosScale;
		y2 *= iosScale;
		x3 *= iosScale;
		y3 *= iosScale;

		//ä¸‰è§’å½¢
		ctx.beginPath(); //å¼€å§‹ç»˜åˆ¶
		ctx.strokeStyle = color;
		ctx.fillStyle = color;
		ctx.globalAlpha = globalAlpha;
		ctx.moveTo(x1, y1);//å¼€å§‹ç‚¹ï¼Œè®¾ç½®x,y
		ctx.lineTo(x2, y2);//é€”ç»ç‚¹ï¼Œè®¾ç½®x,y
		ctx.lineTo(x3, y3);//æœ€ç»ˆç‚¹ï¼Œè®¾ç½®x,y
		ctx.closePath(); //é—­åˆè·¯å¾„
		if (isFill) {
			ctx.fill(); //ç»˜åˆ¶å®å¿ƒ
		} else {
			ctx.stroke(); //ç»˜åˆ¶ç©ºå¿ƒ
		}
	}

	//ç»˜åˆ¶å¯¹è§’çŸ©å½¢ èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……ï¼ˆå¯¹è§’æ–¹æ¡†ï¼‰
	function drawMyRect(x, y, w, h, color, isFill = true) {
		x *= iosScale;
		y *= iosScale;
		w *= iosScale;
		h *= iosScale;

		ctx.strokeStyle = color;
		ctx.lineWidth = app.xian;

		ctx.beginPath();

		ctx.moveTo(x, y);
		ctx.lineTo(Number(x) + Number(w) / 6, y);
		ctx.closePath();

		ctx.moveTo(x, y);
		ctx.lineTo(x, Number(y) + Number(h / 6));
		ctx.closePath();

		ctx.moveTo(Number(x) + Number(w) - Number(w) / 6, y);
		ctx.lineTo(Number(x) + Number(w), y);
		ctx.closePath();

		ctx.moveTo(Number(x) + Number(w), y);
		ctx.lineTo(Number(x) + Number(w), Number(y) + Number(h / 6));
		ctx.closePath();

		ctx.moveTo(Number(x), Number(y) + Number(h));
		ctx.lineTo(Number(x), Number(y) + Number(h) - Number(h / 6));
		ctx.closePath();

		ctx.moveTo(Number(x), Number(y) + Number(h));
		ctx.lineTo(Number(x) + Number(w) / 6, Number(y) + Number(h));

		ctx.moveTo(Number(x) + Number(w), Number(y) + Number(h));
		ctx.lineTo(Number(x) + Number(w) - (w / 6), Number(y) + Number(h));

		ctx.moveTo(Number(x) + Number(w), Number(y) + Number(h));
		ctx.lineTo(Number(x) + Number(w), Number(y) + Number(h) - Number(h / 6));
		ctx.closePath();
		ctx.stroke();
	}

	//ç»˜åˆ¶å›¾ç‰‡ å›¾ç‰‡å†…å®¹ï¼Œèµ·ç‚¹xyï¼Œå›¾ç‰‡å®½é«˜ï¼ˆæ‰‹æŒè´´å›¾ï¼‰
	function drawImage(png, x, y, w, h) {
		x *= iosScale;
		y *= iosScale;
		w *= iosScale;
		h *= iosScale;

		ctx.beginPath();
		var img = new Image();
		img.src = png;
		//å›¾ç‰‡åŠ è½½å®Œæˆå
		img.onload = function () {
			ctx.drawImage(img, x, y, w, h);
		}
		ctx.closePath();
	}

	//ç»˜åˆ¶çŸ©å½¢ èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œé€æ˜åº¦ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢ï¼ˆé˜Ÿæ ‡ã€åå­—èƒŒæ™¯ï¼‰
	function drawRectangle(x, y, w, h, color, transparency, isFill = true) {
		x *= iosScale;
		y *= iosScale;
		w *= iosScale;
		h *= iosScale;

		ctx.beginPath();
		ctx.fillStyle = color;
		ctx.globalAlpha = transparency;
		ctx.fillRect(x, y, w, h,);
		ctx.closePath();
	}

	//ç»˜åˆ¶çº¿æ¡ï¼Œèµ·å§‹ç‚¹xyï¼Œç»ˆç‚¹xyï¼Œé¢œè‰²ï¼ˆé›·è¾¾çº¿æ¡ã€å°„çº¿ã€3Dæ¡†çº¿æ¡ï¼‰
	function drawLine(x1, y1, x2, y2, color, lineWidth) {
		x1 *= iosScale;
		y1 *= iosScale;
		x2 *= iosScale;
		y2 *= iosScale;

		ctx.beginPath();
		ctx.lineWidth = lineWidth;
		ctx.fillStyle = color;
		ctx.strokeStyle = color;
		ctx.moveTo(x1, y1);
		ctx.lineTo(x2, y2);
		ctx.stroke();
		ctx.closePath();
	}

	//ç»˜åˆ¶åœ†å½¢ èµ·ç‚¹xyï¼Œåœ†å½¢å¼§åº¦ï¼Œå¤§å°ï¼Œé¢œè‰²ï¼Œçº¿å®½ï¼Œæ˜¯å¦å¡«å……ï¼ˆç®€æ´é£æ ¼è¡€æ¡ã€é›·è¾¾ã€èƒŒæ•Œï¼‰
	function drawCircular(x, y, num, size, color, lineWidth, isFill = true) {
		x *= iosScale;
		y *= iosScale;
		size *= iosScale;

		if (num === 100) num = 1;
		else if (num > 0) num = 1 - num / 100;
		const d2a = n => n * Math.PI / 180;

		ctx.beginPath();
		ctx.lineWidth = lineWidth;
		ctx.arc(x, y, size, d2a(num * 360 - 90), d2a(-90), false);
		if (isFill) {
			ctx.fillStyle = color;
			ctx.fill();
		} else {
			ctx.strokeStyle = color;
			ctx.stroke();
		}
		ctx.closePath();
	}

	//ç»˜åˆ¶çŸ©å½¢ èµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢ (æ–¹æ¡†)
	function drawRect(x, y, w, h, color, isFill = true) {
		x *= iosScale;
		y *= iosScale;
		w *= iosScale;
		h *= iosScale;

		ctx.beginPath();
		ctx.lineWidth = app.xian;
		ctx.strokeStyle = color;
		ctx.fillStyle = color;
		ctx.globalAlpha = 1;
		if (isFill) {
			ctx.fillRect(x, y, w, h);
		} else {
			ctx.strokeRect(x, y, w, h);
		}
		ctx.closePath();
	}

	//ç»˜åˆ¶åœ†è§’çŸ©å½¢ï¼Œèµ·ç‚¹xyï¼ŒçŸ©å½¢å®½é«˜ï¼Œåœ†è§’åŠå¾„ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……çŸ©å½¢
	function drawRoundRect(x, y, w, h, r, color, isFill = true) {
		x *= iosScale;
		y *= iosScale;
		w *= iosScale;
		h *= iosScale;
		r *= iosScale;

		ctx.beginPath();
		ctx.strokeStyle = color;
		ctx.fillStyle = color;
		ctx.globalAlpha = 1;
		if (w < 2 * r) r = w / 2;
		if (h < 2 * r) r = h / 2;
		ctx.beginPath();
		ctx.moveTo(x + r, y);
		ctx.arcTo(x + w, y, x + w, y + h, r);
		ctx.arcTo(x + w, y + h, x, y + h, r);
		ctx.arcTo(x, y + h, x, y, r);
		ctx.arcTo(x, y, x + w, y, r);
		if (isFill) {
			ctx.fill();
		} else {
			ctx.stroke();
		}
		ctx.closePath();
	}

	//ç»˜åˆ¶æ–‡å­—ï¼Œæ–‡å­—å†…å®¹ï¼Œèµ·ç‚¹xyï¼Œæ–‡å­—å¤§å°ï¼Œæ–‡å­—å¯¹é½ï¼Œé¢œè‰²ï¼Œæ˜¯å¦å¡«å……æ–‡å­—
	function drawText(text, x, y, size, color, textAlign, isFill = true) {
		x *= iosScale;
		y *= iosScale;
		size *= iosScale;

		ctx.beginPath();
		ctx.globalAlpha = 1; //é€æ˜åº¦
		ctx.textAlign = textAlign; //æ–‡å­—å¯¹é½
		ctx.fillStyle = color;
		ctx.strokeStyle = color;
		ctx.font = size + 'px' + fontFamily;
		if (isFill) {
			ctx.fillText(text, x, y + size);
		} else {
			ctx.strokeText(text, x, y + size);
		}
		ctx.closePath();
	};

	// ********************* å†…å­˜ç›¸å…³ *********************
	function readInt(addr) {
		return Number(h5gg.getValue(addr, "I32"));
	}

	function readLong(addr) {
		return Number(h5gg.getValue(addr, "I64"));
	}

	function readFloat(addr) {
		return Number(h5gg.getValue(addr, "F32"));
	}

	function isNull(addr) {
		return (addr < 0x100000000 || addr > 0x300000000);
	}

	// ********************* UE4ç›¸å…³ *********************
	function RotatorToMatrix(rotation) {
		var radPitch = rotation.Pitch * (Math.PI / 180.0);
		var radYaw = rotation.Yaw * (Math.PI / 180.0);
		var radRoll = rotation.Roll * (Math.PI / 180.0);

		var SP = Math.sin(radPitch);
		var CP = Math.cos(radPitch);
		var SY = Math.sin(radYaw);
		var CY = Math.cos(radYaw);
		var SR = Math.sin(radRoll);
		var CR = Math.cos(radRoll);

		var matrix = new Array(16).fill(0);

		matrix[0] = (CP * CY);
		matrix[1] = (CP * SY);
		matrix[2] = (SP);
		matrix[3] = 0;

		matrix[4] = (SR * SP * CY - CR * SY);
		matrix[5] = (SR * SP * SY + CR * CY);
		matrix[6] = (-SR * CP);
		matrix[7] = 0;

		matrix[8] = (-(CR * SP * CY + SR * SY));
		matrix[9] = (CY * SR - CR * SP * SY);
		matrix[10] = (CR * CP);
		matrix[11] = 0;

		matrix[12] = 0;
		matrix[13] = 0;
		matrix[14] = 0;
		matrix[15] = 1;

		return matrix;
	}

	function vectorDot(lhs, rhs) {
		return (((lhs.X * rhs.X) + (lhs.Y * rhs.Y)) + (lhs.Z * rhs.Z));
	}

	function world2Screen(worldLocation, camViewInfo, tempMatrix) {
		// var tempMatrix = RotatorToMatrix(camViewInfo.Rotation);

		var vAxisX = {
			X: tempMatrix[0],
			Y: tempMatrix[1],
			Z: tempMatrix[2]
		};

		var vAxisY = {
			X: tempMatrix[4],
			Y: tempMatrix[5],
			Z: tempMatrix[6]
		};

		var vAxisZ = {
			X: tempMatrix[8],
			Y: tempMatrix[9],
			Z: tempMatrix[10]
		};

		var vDelta = {
			X: worldLocation.X - camViewInfo.Location.X,
			Y: worldLocation.Y - camViewInfo.Location.Y,
			Z: worldLocation.Z - camViewInfo.Location.Z
		};

		var vTransformed = {
			X: vectorDot(vDelta, vAxisY),
			Y: vectorDot(vDelta, vAxisZ),
			Z: vectorDot(vDelta, vAxisX)
		};

		if (vTransformed.Z < 1.0) {
			vTransformed.Z = 1.0;
		}

		var fov = camViewInfo.FOV;
		var screenCenterX = (sWidth / 2.0);
		var screenCenterY = (sHeight / 2.0);

		var re = {
			X: (screenCenterX + vTransformed.X * (screenCenterX / Math.tan(fov * (Math.PI / 360.0))) / vTransformed.Z),
			Y: (screenCenterY - vTransformed.Y * (screenCenterX / Math.tan(fov * (Math.PI / 360.0))) / vTransformed.Z)
		};

		return re;
	};

	/***************éª¨éª¼å‡½æ•°*******************/
	function getBoneWorldPos(boneTransAddr, c2wMatrix) {
		var boneTrans = {
			Rotation: {
				x: readFloat(boneTransAddr),
				y: readFloat(boneTransAddr + 4),
				z: readFloat(boneTransAddr + 8),
				w: readFloat(boneTransAddr + 12),
			},
			Translation: {
				X: readFloat(boneTransAddr + 16),
				Y: readFloat(boneTransAddr + 20),
				Z: readFloat(boneTransAddr + 24),
				W: readFloat(boneTransAddr + 28),
			},
			Scale3D: {
				X: readFloat(boneTransAddr + 32),
				Y: readFloat(boneTransAddr + 36),
				Z: readFloat(boneTransAddr + 40),
			},
		}
		var boneMatrix = TransformToMatrix(boneTrans);
		return MatrixToVector(MatrixMulti(boneMatrix, c2wMatrix));
	}

	function MatrixToVector(matrix) {
		var Vector3 = {
			X: matrix[3][0],
			Y: matrix[3][1],
			Z: matrix[3][2]
		}
		return Vector3;
	}

	function MatrixMulti(m1, m2) {
		var matrix = createArrTwo(4, 4, 0);
		for (var i = 0; i < 4; i++) {
			for (var j = 0; j < 4; j++) {
				for (var k = 0; k < 4; k++) {
					matrix[i][j] += m1[i][k] * m2[k][j];
				}
			}
		}
		return matrix;
	}

	function TransformToMatrix(transform) {
		var matrix = createArrTwo(4, 4, 0);

		matrix[3][0] = transform.Translation.X;
		matrix[3][1] = transform.Translation.Y;
		matrix[3][2] = transform.Translation.Z;

		var x2 = transform.Rotation.x + transform.Rotation.x;
		var y2 = transform.Rotation.y + transform.Rotation.y;
		var z2 = transform.Rotation.z + transform.Rotation.z;

		var xx2 = transform.Rotation.x * x2;
		var yy2 = transform.Rotation.y * y2;
		var zz2 = transform.Rotation.z * z2;

		matrix[0][0] = (1.0 - (yy2 + zz2)) * transform.Scale3D.X;
		matrix[1][1] = (1.0 - (xx2 + zz2)) * transform.Scale3D.Y;
		matrix[2][2] = (1.0 - (xx2 + yy2)) * transform.Scale3D.Z;

		var yz2 = transform.Rotation.y * z2;
		var wx2 = transform.Rotation.w * x2;
		matrix[2][1] = (yz2 - wx2) * transform.Scale3D.Z;
		matrix[1][2] = (yz2 + wx2) * transform.Scale3D.Y;

		var xy2 = transform.Rotation.x * y2;
		var wz2 = transform.Rotation.w * z2;
		matrix[1][0] = (xy2 - wz2) * transform.Scale3D.Y;
		matrix[0][1] = (xy2 + wz2) * transform.Scale3D.X;

		var xz2 = transform.Rotation.x * z2;
		var wy2 = transform.Rotation.w * y2;
		matrix[2][0] = (xz2 + wy2) * transform.Scale3D.Z;
		matrix[0][2] = (xz2 - wy2) * transform.Scale3D.X;

		matrix[0][3] = 0;
		matrix[1][3] = 0;
		matrix[2][3] = 0;
		matrix[3][3] = 1;

		return matrix;
	}

	function createArrTwo(num1, num2, data) {
		let arr = new Array(num1)
		for (let i = 0; i < num1; ++i) {
			arr[i] = new Array(num2)
			for (let x = 0; x < num2; ++x) {
				arr[i][x] = data
			}
		}
		return arr
	}
	/***************éª¨éª¼å‡½æ•°*******************/

	cacheTimer = setInterval(function () {
		drawCache();
	}, 1000); //ä¸€ç§’ç¼“å­˜ä¸€æ¬¡

	drawTimer = setInterval(function () {
		if (app.checkboxList.isDraw == '1') {
			console.log("1");
			shadowDraw();

			//è®¡ç®—FPS
			if (!window.fpscount) window.fpscount = 0;
			if (!window.fpstime) window.fpstime = performance.now();
			window.fpscount++;
			if ((performance.now() - window.fpstime) > 2000) {
				window.fps = window.fpscount;
				window.fpstime = performance.now();
				window.fpscount = 0;
			}
			ctx.textBaseline = "top";
			ctx.textAlign = "center";
			ctx.font = '40px "Arial, sans-serif"';
			ctx.fillStyle = "aqua";

			if (window.fps) ctx.fillText("FPS: " + window.fps, 150, 50);
		} else {
			clearCtx();
		}
	}, app.fps);
</script>
<script>//BSæ·»åŠ 
	//BSPHPæœåŠ¡å™¨åœ°å€,åœ¨BSPHPåå°è½¯ä»¶>è½¯ä»¶é…ç½®
    const G_BSPHP_URL = "http://124.223.167.6:5588/AppEn.php?appid=98741236&m=7961de316da6303410c27ccca09e21c1";//BSæ·»åŠ 

	//é€šä¿¡å¯†é’¥Key
    const G_BSPHP_KEY = "7f3eef9d996b198770b3fb0c73ebe8ee";//BSæ·»åŠ 


	const Base64 = {//BSæ·»åŠ 
		encode: (str) => {//BSæ·»åŠ 
			return window.btoa(unescape(encodeURIComponent(str)))//BSæ·»åŠ 
		},//BSæ·»åŠ 
		decode: (str) => {//BSæ·»åŠ 
			return decodeURIComponent(escape(window.atob(str)))//BSæ·»åŠ 
		}//BSæ·»åŠ 
	}//BSæ·»åŠ 

	function bin2hex(s) {//BSæ·»åŠ 
		var i, l, o = '',//BSæ·»åŠ 
			n;//BSæ·»åŠ 

		s += '';//BSæ·»åŠ 

		for (i = 0, l = s.length; i < l; i++) {//BSæ·»åŠ 
			n = s.charCodeAt(i)//BSæ·»åŠ 
				.toString(16);//BSæ·»åŠ 
			o += n.length < 2 ? '0' + n : n;//BSæ·»åŠ 
		}//BSæ·»åŠ 

		return o;//BSæ·»åŠ 
	}//BSæ·»åŠ   ä¸‹è¾¹éƒ½æ˜¯

	function getUUID() {
       var canvas = document.createElement('canvas');
       var ctx = canvas.getContext("2d");
       var txt = "shadowUUID";
       ctx.textBaseline = "bottom";
       ctx.font = "16px 'Arial'";
       ctx.textBaseline = "shadow";
       ctx.fillStyle = "#FFF";
       ctx.fillRect(125, 1, 62, 20);
       ctx.fillStyle = "#FFF";
       ctx.fillText(txt, 2, 15);
       ctx.fillStyle = "rgba(255, 1, 0, 0.7)";
       ctx.fillText(txt, 4, 17);
   
       var b64 = canvas.toDataURL().replace("data:image/png;base64,", "");
       var bin = atob(b64);
       var crc = bin2hex(bin.slice(-20, -12));
       return crc;
   }

	function GetGlobalParameter() {
		var gArray = {
			"BSphpSeSsL": getUUID(),
			"date": Date.parse(new Date()) / 1000,
			"md5": "",
			"mutualkey": G_BSPHP_KEY //é€šä¿¡å¯†é’¥Key
		};

		return gArray;
	}

	function obj2Url(param, key, encode) {
		if (param == null) return '';
		var paramStr = '';
		var t = typeof (param);
		if (t == 'string' || t == 'number' || t == 'boolean') {
			paramStr += '&' + key + '=' + ((encode == null || encode) ? encodeURIComponent(param) : param);
		} else {
			for (var i in param) {
				var k = key == null ? i : key + (param instanceof Array ? '[' + i + ']' : '.' + i);
				paramStr += obj2Url(param[i], k, encode);
			}
		}
		return paramStr;
	}

	function bsphpPost(param) {
		param = obj2Url(param);
		param = "parameter=" + Base64.encode(param);
		var jqdata = $.ajax({
			url: G_BSPHP_URL,
			type: "POST",
			data: param,
			async: false
		});
		if (jqdata.status === 200) {
			return Base64.decode(jqdata.responseText);
		}
		return jqdata.statusText;
	}

	//å…¨å±€UUIDï¼Œç›´æ¥ä½¿ç”¨
	const UUID = getUUID();

	const BSPHP = {
		//è½¯ä»¶ç‰ˆæœ¬ä¿¡æ¯ï¼ŒæŸ¥çœ‹https://www.bsphp.com/chm-13.html
		v: () => {
			var p = GetGlobalParameter();
			p.api = "v.in";
			return bsphpPost(p);
		},
		//å…¬å‘Šï¼ŒæŸ¥çœ‹https://www.bsphp.com/chm-14.html
		gg: () => {
			var p = GetGlobalParameter();
			p.api = "gg.in";
			return bsphpPost(p);
		},
		//ç™»å½•ï¼ŒæŸ¥çœ‹https://www.bsphp.com/chm-45.html
		login: (card) => {
			var p = GetGlobalParameter();
			p.api = "login.ic";
			p.icid = card;
			p.key = UUID;
			p.maxoror = UUID;
			return bsphpPost(p);
		},
		//è·å–ç™»å½•çŠ¶æ€ï¼ŒæŸ¥çœ‹https://www.bsphp.com/chm-54.html
		getlkinfo: () => {
			var p = GetGlobalParameter();
			p.api = "getlkinfo.ic";
			return bsphpPost(p);
		},
		//è·å–ç”¨æˆ·ä¿¡æ¯,æŸ¥çœ‹https://www.bsphp.com/chm-50.html
		getinfo: (info) => {
			var p = GetGlobalParameter();//ä¸Šè¾¹éƒ½æ˜¯æ·»åŠ BSæ·»åŠ 
			p.api = "getinfo.ic";//BSæ·»åŠ 
			p.info = info;//BSæ·»åŠ 
			return bsphpPost(p);//BSæ·»åŠ 
		},//BSæ·»åŠ 
	}//BSæ·»åŠ 
</script>  <!-- BSæ·»åŠ å‘½ä»¤ -->  

</html>
